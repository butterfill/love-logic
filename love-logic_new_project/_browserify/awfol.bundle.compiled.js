/*

 lodash 3.10.1 (Custom Build) <https://lodash.com/>
 Build: `lodash modern -d -o ./index.js`
 Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 Available under MIT license <https://lodash.com/license>
*/
(function e$$0(y,b,v){function p(e,w){if(!b[e]){if(!y[e]){var u="function"==typeof require&&require;if(!w&&u)return u(e,!0);if(z)return z(e,!0);u=Error("Cannot find module '"+e+"'");throw u.code="MODULE_NOT_FOUND",u;}u=b[e]={exports:{}};y[e][0].call(u.exports,function(w){var u=y[e][1][w];return p(u?u:w)},u,u.exports,e$$0,y,b,v)}return b[e].exports}for(var z="function"==typeof require&&require,e=0;e<v.length;e++)p(v[e]);return p})({1:[function(g,y,b){},{}],2:[function(g,y,b){(function(g){function p(e,
u){for(var q=0,g=e.length-1;0<=g;g--){var C=e[g];"."===C?e.splice(g,1):".."===C?(e.splice(g,1),q++):q&&(e.splice(g,1),q--)}if(u)for(;q--;q)e.unshift("..");return e}function z(e,u){if(e.filter)return e.filter(u);for(var g=[],b=0;b<e.length;b++)u(e[b],b,e)&&g.push(e[b]);return g}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;b.resolve=function(){for(var e="",u=!1,q=arguments.length-1;-1<=q&&!u;q--){var b=0<=q?arguments[q]:g.cwd();if("string"!==typeof b)throw new TypeError("Arguments to path.resolve must be strings");
b&&(e=b+"/"+e,u="/"===b.charAt(0))}e=p(z(e.split("/"),function(e){return!!e}),!u).join("/");return(u?"/":"")+e||"."};b.normalize=function(e){var g=b.isAbsolute(e),q="/"===D(e,-1);(e=p(z(e.split("/"),function(e){return!!e}),!g).join("/"))||g||(e=".");e&&q&&(e+="/");return(g?"/":"")+e};b.isAbsolute=function(e){return"/"===e.charAt(0)};b.join=function(){var e=Array.prototype.slice.call(arguments,0);return b.normalize(z(e,function(e,g){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");
return e}).join("/"))};b.relative=function(e,g){function q(k){for(var e=0;e<k.length&&""===k[e];e++);for(var c=k.length-1;0<=c&&""===k[c];c--);return e>c?[]:k.slice(e,c-e+1)}e=b.resolve(e).substr(1);g=b.resolve(g).substr(1);for(var A=q(e.split("/")),C=q(g.split("/")),G=Math.min(A.length,C.length),x=G,r=0;r<G;r++)if(A[r]!==C[r]){x=r;break}G=[];for(r=x;r<A.length;r++)G.push("..");G=G.concat(C.slice(x));return G.join("/")};b.sep="/";b.delimiter=":";b.dirname=function(g){var b=e.exec(g).slice(1);g=b[0];
b=b[1];if(!g&&!b)return".";b&&(b=b.substr(0,b.length-1));return g+b};b.basename=function(g,b){var q=e.exec(g).slice(1)[2];b&&q.substr(-1*b.length)===b&&(q=q.substr(0,q.length-b.length));return q};b.extname=function(g){return e.exec(g).slice(1)[3]};var D="b"==="ab".substr(-1)?function(e,g,b){return e.substr(g,b)}:function(e,g,b){0>g&&(g=e.length+g);return e.substr(g,b)}}).call(this,g("_process"))},{_process:3}],3:[function(g,y,b){function v(){w=!1;u.length?D=u.concat(D):q=-1;D.length&&p()}function p(){if(!w){var e=
setTimeout(v);w=!0;for(var g=D.length;g;){u=D;for(D=[];++q<g;)u&&u[q].run();q=-1;g=D.length}u=null;w=!1;clearTimeout(e)}}function z(e,g){this.fun=e;this.array=g}function e(){}g=y.exports={};var D=[],w=!1,u,q=-1;g.nextTick=function(e){var g=Array(arguments.length-1);if(1<arguments.length)for(var b=1;b<arguments.length;b++)g[b-1]=arguments[b];D.push(new z(e,g));1!==D.length||w||setTimeout(p,0)};z.prototype.run=function(){this.fun.apply(null,this.array)};g.title="browser";g.browser=!0;g.env={};g.argv=
[];g.version="";g.versions={};g.on=e;g.addListener=e;g.once=e;g.off=e;g.removeListener=e;g.removeAllListeners=e;g.emit=e;g.binding=function(e){throw Error("process.binding is not supported");};g.cwd=function(){return"/"};g.chdir=function(e){throw Error("process.chdir is not supported");};g.umask=function(){return 0}},{}],4:[function(g,y,b){y="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b=g("../fol");g=g("../proofs/proof");y.fol=b;y.proof=
g},{"../fol":6,"../proofs/proof":19}],5:[function(g,y,b){var v,p,z;p=g("lodash");z=g("./parser/awFOL");v=function(e,g){this.world=g;p.isString(e)?this.sentence=z.parse(e):this.sentence=e;this.varStack={};return this};v.prototype.logSentence=function(){return console.log("sentence "+JSON.stringify(this.sentence,null,4))};v.prototype.evaluate=function(e){var g,b,u,q,A;e=null!=e?e:this.sentence;if("value"===e.type)return e.value;if("and"===e.type)return this.evaluate(e.left)&&this.evaluate(e.right);
if("nand"===e.type)return!(this.evaluate(e.left)&&this.evaluate(e.right));if("or"===e.type)return this.evaluate(e.left)||this.evaluate(e.right);if("nor"===e.type)return!(this.evaluate(e.left)||this.evaluate(e.right));if("not"===e.type)return!this.evaluate(e.left);if("arrow"===e.type)return!this.evaluate(e.left)||this.evaluate(e.right);if("double_arrow"===e.type)return this.evaluate(e.left)===this.evaluate(e.right);if("sentence_letter"===e.type)return this.world[e.letter];if("predicate"===e.type||
"identity"===e.type)return b=e,g="identity"===b.type?function(){var e,g,b,r;b=this.world.domain;r=[];e=0;for(g=b.length;e<g;e++)A=b[e],r.push([A,A]);return r}.call(this):this.world.predicates[b.name],b=this.instantiate_terms(b.termlist),g=p.where(g,b),0<g.length;if("existential_quantifier"===e.type||"universal_quantifier"===e.type)return g=e.boundVariable,q=g.name,q in this.varStack||(this.varStack[q]=[]),u=this,"existential_quantifier"===e.type&&(b=p.some),"universal_quantifier"===e.type&&(b=p.all),
b(this.world.domain,function(g){u.varStack[q].push(g);g=u.evaluate(e.left);u.varStack[q].pop();return g});throw Error("e (evaluate inner) could not evaluate sentence "+JSON.stringify(e,null,4));};v.prototype.instantiate_terms=function(e){var g,b,u,q;u=[];g=0;for(b=e.length;g<b;g++)if(q=e[g],"name"===q.type){if(!(q.name in this.world.names))throw Error("The name "+q.name+" is not defined in this world.");u.push(this.world.names[q.name])}else if("variable"===q.type){if(!(q.name in this.varStack))throw Error("The variable "+
q.name+" is not bound by any quantifier.");u.push(p.last(this.varStack[q.name]))}else throw Error("Encountered a term of unknown type: "+JSON.stringify(q,null,4));return u};b.evaluate=function(e,g){return(new v(e,g)).evaluate()}},{"./parser/awFOL":10,lodash:8}],6:[function(g,y,b){var v,p,z,e,D,w,u,q;v=g("lodash");z=g("./parser/awFOL");q=g("./util");D=g("./match");u=g("./substitute");w=g("./normal_form");e=g("./evaluate");b.parse=function(e){e=z.parse(e);return p(e)};p=function(g){q.walk(g,function(b){if(null!==
b&&!(v.isArray(b)||v.isString(b)||v.isBoolean(b)||v.isNumber(b)))return b.walk=function(e){q.walk(b,e);return b},b.delExtraneousProperties=function(){return q.delExtraneousProperties(b)},b.isIdenticalTo=function(e){return q.areIdenticalExpressions(b,e)},b.clone=function(){var e;e=q.cloneExpression(b);p(e);return e},b.toString=function(e){return q.expressionToString(b,e)},b.listMetaVariableNames=function(){return q.listMetaVariableNames(b)},b.findMatches=function(e,g,r){e=D.find(b,e,g,r);p(e);return e},
b.applyMatches=function(e){e=D.apply(b,e);p(e);return e},b.applySubstitutions=function(){var e;e=u.applySubstitutions(b);p(e);return e},b.containsSubstitutions=function(){var e;e=!1;b.walk(function(b){null!=(null!=b?b.substitutions:void 0)&&(e=!0)});return e},b.getNames=function(){var e;e=[];b.walk(function(b){"name"===(null!=b?b.type:void 0)&&e.push(b.name)});return e},b.getPredicates=function(){var e;e=[];b.walk(function(b){"predicate"===(null!=b?b.type:void 0)&&e.push({name:b.name,arity:b.termlist.length})});
return v.uniq(e,function(e){return e.name+"*&!"+e.arity})},b.getSentenceLetters=function(){var e;e=[];b.walk(function(b){"sentence_letter"===(null!=b?b.type:void 0)&&e.push(b.letter)});return e.sort()},b.getFreeVariableNames=function(){var e,x,r,k;e=q.listTerms(b);x=v.uniq(function(){var k,c,a;a=[];k=0;for(c=e.length;k<c;k++)r=e[k],"variable"===r.type&&a.push(r.name);return a}());return function(){var e,c,a;a=[];e=0;for(c=x.length;e<c;e++)k=x[e],w.isVariableFree(k,g)&&a.push(k);return a}()},b.convertToPNFsimplifyAndSort=
function(){var e;e=w.convertToPNFsimplifyAndSort(g);p(e);return e},b.isPNFExpressionEquivalent=function(e){return w.arePNFExpressionsEquivalent(b,e)},b.evaluate=function(g){return e.evaluate(b,g)}});return g};b._decorate=p},{"./evaluate":5,"./match":7,"./normal_form":9,"./parser/awFOL":10,"./substitute":21,"./util":22,lodash:8}],7:[function(g,y,b){var v,p,z,e,D,w,u,q,A,C,G,x,r,k,t=[].indexOf||function(c){for(var a=0,h=this.length;a<h;a++)if(a in this&&this[a]===c)return a;return-1};v=g("lodash");
k=g("./util");b.find=function(c,a,h){null==h&&(h={});null==h&&(h={});return x(a,function(a){var e,b;a=r(c,a,h);if(!1!==a){for(e in a)b=a[e],a[e]=k.cloneExpression(b);return a}})||!1};r=function(c,a,h){var e;null==h&&(h={});e=function(a,c){var n,b;if(null!=(null!=c?c.type:void 0)&&("expression_variable"===(n=c.type)||"term_metavariable"===n)){"expression_variable"===c.type&&(b=c.letter);"term_metavariable"===c.type&&(b=c.name);if(b in h)return k.areIdenticalExpressions(a,h[b]);h=v.clone(h);h[b]=a;
return null!=c.box?null==a.box?!1:k.walkCompare(a.box,c.box,e):h}};return k.walkCompare(c,a,e)?h:!1};b.findWithoutApplyingSubs=r;x=function(c,a){var h;if(!k.expressionContainsSubstitutions(c))return a(c);h=k.cloneExpression(c);h=A(h);return w(h,a)};b.doAfterApplyingSubstitutions=x;w=function(c,a){var h,e,b,r,n,g;h=D(c);if(b=!k.expressionContainsSubstitutions(h))if(g=a(h))return g;r=G(c);n=!k.expressionContainsSubstitutions(r);e=!k.areIdenticalExpressions(h,r);if(n&&e&&(g=a(r))||!b&&(g=w(h,a))||!n&&
e&&(g=w(r,a)))return g};D=function(c){var a;a=k.cloneExpression(c);return k.walkMutateFindOne(a,function(c){var e,b;if(null!=(null!=c?c.substitutions:void 0)){c=k.cloneExpression(c);b=C(c);if(null==b)return{newExpression:a,aResult:void 0};u(c,b)&&(e=k.cloneExpression(b.to),null!=c.substitutions&&(e.substitutions=c.substitutions),null!=c.box&&(e.box=c.box),c=e);return{newExpression:c,aResult:b}}}).mutatedExpression};u=function(c,a){return c.type!==a.from.type?!1:null!=c.name&&null!=a.from.name&&c.name===
a.from.name||null!=c.letter&&null!=a.from.letter&&c.letter===a.from.letter?!0:!1};G=function(c){c=k.cloneExpression(c);return k.walkMutateFindOne(c,function(a){var c;if(null!=(null!=a?a.substitutions:void 0))return a=k.cloneExpression(a),c=C(a),{newExpression:a,aResult:c}}).mutatedExpression};A=function(c){c=k.cloneExpression(c);return k.walkMutate(c,function(a){var c;if(null==(null!=a?a.substitutions:void 0)||null!=(null!=a?a.type:void 0)&&("name"===(c=a.type)||"variable"===c||"term_metavariable"===
c))return a;for(c=C(a);c;)a=q(c)?z(a,c):p(a,c),c=C(a);return a})};b._moveAllSubsInwards=A;C=function(c){var a;if(null!=c.substitutions){for(a=c.substitutions.shift();0<c.substitutions.length&&k.areIdenticalExpressions(a.from,a.to);)a=c.substitutions.shift();if(k.areIdenticalExpressions(a.from,a.to))delete c.substitutions;else return 0===c.substitutions.length&&delete c.substitutions,a}};q=function(c){var a;return(a=c.from.type,0<=t.call(k.termTypes,a))?!0:!1};z=function(c,a){return e(c,a,k.termTypes)};
b._addSubToEveryTerm=z;p=function(c,a){return e(c,a,["sentence_letter","expression_variable"])};b._addSubToEverySentence=p;e=function(c,a,h){var e,b;b=function(a){var c;if(null==(null!=a?a.type:void 0)||!(c=a.type,0<=t.call(h,c))||b._inSub)return a;a.substitutions&&!k.expressionHasSub(a,e)?a.substitutions.push(e):a.substitutions=[e];return a};c=k.cloneExpression(c);e=k.cloneExpression(a);return c=k.walkMutate(c,b)};b.apply=function(c,a,h){var e;null==h&&(h={});e=function(c){var h,e;if(null==(null!=
c?c.type:void 0)||"expression_variable"!==(h=c.type)&&"term_metavariable"!==h)return c;"expression_variable"===c.type&&(e=c.letter);"term_metavariable"===c.type&&(e=c.name);if(!(e in a))return c;h=k.cloneExpression(a[e]);null!=c.substitutions&&(h.substitutions=c.substitutions);null!=c.box&&(h.box=c.box);return h};if(h.noClone)return k.walkMutate(c,e);c=k.cloneExpression(c);return k.walkMutate(c,e)}},{"./util":22,lodash:8}],8:[function(g,y,b){(function(g){(function(){function p(a,c){if(a!==c){var h=
null===a,e=a===n,k=a===a,b=null===c,m=c===n,g=c===c;if(a>c&&!b||!k||h&&!m&&g||e&&g)return 1;if(a<c&&!h||!g||b&&!e&&k||m&&k)return-1}return 0}function z(a,c,h){for(var e=a.length,k=h?e:-1;h?k--:++k<e;)if(c(a[k],k,a))return k;return-1}function e(a,c,h){if(c!==c)return k(a,h);--h;for(var e=a.length;++h<e;)if(a[h]===c)return h;return-1}function D(a){return"function"==typeof a||!1}function w(a){return null==a?"":a+""}function u(a,c){for(var h=-1,e=a.length;++h<e&&-1<c.indexOf(a.charAt(h)););return h}function q(a,
c){for(var h=a.length;h--&&-1<c.indexOf(a.charAt(h)););return h}function A(a,c){return p(a.criteria,c.criteria)||a.index-c.index}function C(a){return va[a]}function G(a){return Ka[a]}function x(a,c,h){c?a=tb[a]:h&&(a=La[a]);return"\\"+a}function r(a){return"\\"+La[a]}function k(a,c,h){var e=a.length;for(c+=h?0:-1;h?c--:++c<e;){var k=a[c];if(k!==k)return c}return-1}function t(a){return!!a&&"object"==typeof a}function c(a){return 160>=a&&9<=a&&13>=a||32==a||160==a||5760==a||6158==a||8192<=a&&(8202>=
a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function a(a,c){for(var h=-1,e=a.length,k=-1,b=[];++h<e;)a[h]===c&&(a[h]="__lodash_placeholder__",b[++k]=h);return b}function h(a){for(var h=-1,e=a.length;++h<e&&c(a.charCodeAt(h)););return h}function m(a){for(var h=a.length;h--&&c(a.charCodeAt(h)););return h}function F(a){return ub[a]}function H(c){function b(d){if(t(d)&&!I(d)&&!(d instanceof y)){if(d instanceof v)return d;if(Q.call(d,"__chain__")&&Q.call(d,"__wrapped__"))return fc(d)}return new v(d)}
function g(){}function v(d,f,l){this.__wrapped__=d;this.__actions__=l||[];this.__chain__=!!f}function y(d){this.__wrapped__=d;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=Xa;this.__views__=[]}function va(){this.__data__={}}function ea(d){var f=d?d.length:0;for(this.data={hash:Ya(null),set:new Za};f--;)this.push(d[f])}function la(d,f){var l=d.data;return("string"==typeof f||M(f)?l.set.has(f):l.hash[f])?0:-1}function W(d,f){var l=-1,a=d.length;for(f||
(f=N(a));++l<a;)f[l]=d[l];return f}function fa(d,f){for(var l=-1,a=d.length;++l<a&&!1!==f(d[l],l,d););return d}function ua(d,f){for(var l=-1,a=d.length;++l<a;)if(!f(d[l],l,d))return!1;return!0}function Ka(d,f){for(var l=-1,a=d.length,c=-1,b=[];++l<a;){var h=d[l];f(h,l,d)&&(b[++c]=h)}return b}function Fa(d,f){for(var l=-1,a=d.length,c=N(a);++l<a;)c[l]=f(d[l],l,d);return c}function Ma(d,f){for(var l=-1,a=f.length,c=d.length;++l<a;)d[c+l]=f[l];return d}function La(d,f,l,a){var c=-1,b=d.length;for(a&&
b&&(l=d[++c]);++c<b;)l=f(l,d[c],c,d);return l}function gc(d,f){for(var l=-1,a=d.length;++l<a;)if(f(d[l],l,d))return!0;return!1}function hc(d,f,l,a){return d!==n&&Q.call(a,l)?d:f}function vb(d,f,l){for(var a=-1,c=U(f),b=c.length;++a<b;){var h=c[a],e=d[h],k=l(e,f[h],h,d,f);(k===k?k===e:e!==e)&&(e!==n||h in d)||(d[h]=k)}return d}function Na(d,f){return null==f?d:ic(f,U(f),d)}function jc(d,f){for(var l=-1,a=null==d,c=!a&&S(d),b=c?d.length:0,h=f.length,e=N(h);++l<h;){var k=f[l];e[l]=c?pa(k,b)?d[k]:n:a?
n:d[k]}return e}function ic(d,f,l){l||(l={});for(var a=-1,c=f.length;++a<c;){var b=f[a];l[b]=d[b]}return l}function $a(d,f,l){var a=typeof d;return"function"==a?f===n?d:aa(d,f,l):null==d?wa:"object"==a?Oa(d):f===n?ab(d):kc(d,f)}function xa(d,f,l,a,c,b,h){var e;l&&(e=c?l(d,a,c):l(d));if(e!==n)return e;if(!M(d))return d;if(a=I(d)){if(e=Ud(d),!f)return W(d,e)}else{var k=ba.call(d),m="[object Function]"==k;if("[object Object]"==k||"[object Arguments]"==k||m&&!c){if(e=Vd(m?{}:d),!f)return Na(e,d)}else return O[k]?
Wd(d,k,f):c?d:{}}b||(b=[]);h||(h=[]);for(c=b.length;c--;)if(b[c]==d)return h[c];b.push(d);h.push(e);(a?fa:ma)(d,function(a,c){e[c]=xa(a,f,l,c,d,b,h)});return e}function lc(d,f,l){if("function"!=typeof d)throw new ca("Expected a function");return bb(function(){d.apply(n,l)},f)}function Pa(d,f){var l=d?d.length:0,a=[];if(!l)return a;var c=-1,b=Ga(),h=b==e,k=h&&200<=f.length?Ya&&Za?new ea(f):null:null,m=f.length;k&&(b=la,h=!1,f=k);a:for(;++c<l;)if(k=d[c],h&&k===k){for(var n=m;n--;)if(f[n]===k)continue a;
a.push(k)}else 0>b(f,k,0)&&a.push(k);return a}function tb(d,f){var l=!0;ga(d,function(d,a,c){return l=!!f(d,a,c)});return l}function ub(d,f,l,a){var c=a,b=c;ga(d,function(d,h,e){h=+f(d,h,e);if(l(h,c)||h===a&&h===b)c=h,b=d});return b}function mc(d,f){var l=[];ga(d,function(d,a,c){f(d,a,c)&&l.push(d)});return l}function nc(d,f,l,a){var c;l(d,function(d,l,b){if(f(d,l,b))return c=a?l:d,!1});return c}function Y(d,f,l,a){a||(a=[]);for(var c=-1,b=d.length;++c<b;){var h=d[c];t(h)&&S(h)&&(l||I(h)||na(h))?
f?Y(h,f,l,a):Ma(a,h):l||(a[a.length]=h)}return a}function oc(d,f){return wb(d,f,qa)}function ma(d,f){return wb(d,f,U)}function xb(d,f){return pc(d,f,U)}function yb(d,f){for(var l=-1,a=f.length,c=-1,b=[];++l<a;){var h=f[l];ya(d[h])&&(b[++c]=h)}return b}function za(d,f,l){if(null!=d){l!==n&&l in ha(d)&&(f=[l]);l=0;for(var a=f.length;null!=d&&l<a;)d=d[f[l++]];return l&&l==a?d:n}}function cb(d,f,l,a,c,b){if(d===f)return!0;if(null==d||null==f||!M(d)&&!t(f))return d!==d&&f!==f;a:{var h=cb,e=I(d),k=I(f),
m="[object Array]",n="[object Array]";e||(m=ba.call(d),"[object Arguments]"==m?m="[object Object]":"[object Object]"!=m&&(e=Ha(d)));k||(n=ba.call(f),"[object Arguments]"==n?n="[object Object]":"[object Object]"!=n&&Ha(f));var g="[object Object]"==m,k="[object Object]"==n,n=m==n;if(!n||e||g){if(!a&&(m=g&&Q.call(d,"__wrapped__"),k=k&&Q.call(f,"__wrapped__"),m||k)){d=h(m?d.value():d,k?f.value():f,l,a,c,b);break a}if(n){c||(c=[]);b||(b=[]);for(m=c.length;m--;)if(c[m]==d){d=b[m]==f;break a}c.push(d);b.push(f);
d=(e?Xd:Yd)(d,f,h,l,a,c,b);c.pop();b.pop()}else d=!1}else d=Zd(d,f,m)}return d}function qc(d,f,l){var a=f.length,c=a,b=!l;if(null==d)return!c;for(d=ha(d);a--;){var h=f[a];if(b&&h[2]?h[1]!==d[h[0]]:!(h[0]in d))return!1}for(;++a<c;){var h=f[a],e=h[0],k=d[e],m=h[1];if(b&&h[2]){if(k===n&&!(e in d))return!1}else if(h=l?l(k,m,e):n,h===n?!cb(m,k,l,!0):!h)return!1}return!0}function zb(d,f){var l=-1,a=S(d)?N(d.length):[];ga(d,function(d,c,b){a[++l]=f(d,c,b)});return a}function Oa(d){var f=rc(d);if(1==f.length&&
f[0][2]){var l=f[0][0],a=f[0][1];return function(d){return null==d?!1:d[l]===a&&(a!==n||l in ha(d))}}return function(d){return qc(d,f)}}function kc(d,f){var l=I(d),a=Aa(d)&&f===f&&!M(f),c=d+"";d=ra(d);return function(b){if(null==b)return!1;var h=c;b=ha(b);if(!(!l&&a||h in b)){b=1==d.length?b:za(b,da(d,0,-1));if(null==b)return!1;h=Qa(d);b=ha(b)}return b[h]===f?f!==n||h in b:cb(f,b[h],n,!0)}}function sc(d,f,l,a,c){if(!M(d))return d;var b=S(f)&&(I(f)||Ha(f)),h=b?n:U(f);fa(h||f,function(e,k){h&&(k=e,
e=f[k]);if(t(e)){a||(a=[]);c||(c=[]);a:{for(var m=k,g=a,r=c,B=g.length,F=f[m];B--;)if(g[B]==F){d[m]=r[B];break a}var B=d[m],E=l?l(B,F,m,d,f):n,q=E===n;q&&(E=F,S(F)&&(I(F)||Ha(F))?E=I(B)?B:S(B)?W(B):[]:db(F)||na(F)?E=na(B)?tc(B):db(B)?B:{}:q=!1);g.push(F);r.push(E);if(q)d[m]=sc(E,F,l,g,r);else if(E===E?E!==B:B===B)d[m]=E}}else m=d[k],g=l?l(m,e,k,d,f):n,(r=g===n)&&(g=e),g===n&&(!b||k in d)||!r&&(g===g?g===m:m!==m)||(d[k]=g)});return d}function Ab(d){return function(f){return null==f?n:f[d]}}function dc(d){var f=
d+"";d=ra(d);return function(l){return za(l,d,f)}}function uc(d,f){for(var l=d?f.length:0;l--;){var a=f[l];if(a!=c&&pa(a)){var c=a;vc.call(d,a,1)}}return d}function Bb(d,f){return d+Ba(wc()*(f-d+1))}function ec(d,f,l,a,c){c(d,function(d,c,b){l=a?(a=!1,d):f(l,d,c,b)});return l}function da(d,f,l){var a=-1,c=d.length;f=null==f?0:+f||0;0>f&&(f=-f>c?0:c+f);l=l===n||l>c?c:+l||0;0>l&&(l+=c);c=f>l?0:l-f>>>0;f>>>=0;for(l=N(c);++a<c;)l[a]=d[a+f];return l}function $d(d,f){var l;ga(d,function(d,a,c){l=f(d,a,
c);return!l});return!!l}function xc(d,f){var l=d.length;for(d.sort(f);l--;)d[l]=d[l].value;return d}function yc(d,f,l){var a=L(),c=-1;f=Fa(f,function(d){return a(d)});d=zb(d,function(d){return{criteria:Fa(f,function(f){return f(d)}),index:++c,value:d}});return xc(d,function(d,f){var a;a:{for(var c=-1,b=d.criteria,h=f.criteria,Td=b.length,e=l.length;++c<Td;)if(a=p(b[c],h[c])){if(c>=e)break a;c=l[c];a*="asc"===c||!0===c?1:-1;break a}a=d.index-f.index}return a})}function ae(d,f){var l=0;ga(d,function(d,
a,c){l+=+f(d,a,c)||0});return l}function Cb(d,f){var l=-1,a=Ga(),c=d.length,b=a==e,h=b&&200<=c,k=h?Ya&&Za?new ea(void 0):null:null,m=[];k?(a=la,b=!1):(h=!1,k=f?[]:m);a:for(;++l<c;){var g=d[l],n=f?f(g,l,d):g;if(b&&g===g){for(var r=k.length;r--;)if(k[r]===n)continue a;f&&k.push(n);m.push(g)}else 0>a(k,n,0)&&((f||h)&&k.push(n),m.push(g))}return m}function Db(d,f){for(var l=-1,a=f.length,c=N(a);++l<a;)c[l]=d[f[l]];return c}function eb(d,f,l,a){for(var c=d.length,b=a?c:-1;(a?b--:++b<c)&&f(d[b],b,d););
return l?da(d,a?0:b,a?b+1:c):da(d,a?b+1:0,a?c:b)}function zc(d,f){var l=d;l instanceof y&&(l=l.value());for(var a=-1,c=f.length;++a<c;)var b=f[a],l=b.func.apply(b.thisArg,Ma([l],b.args));return l}function Eb(d,f,l){var a=0,c=d?d.length:a;if("number"==typeof f&&f===f&&2147483647>=c){for(;a<c;){var b=a+c>>>1,h=d[b];(l?h<=f:h<f)&&null!==h?a=b+1:c=b}return c}return Ac(d,f,wa,l)}function Ac(d,f,l,a){f=l(f);for(var c=0,b=d?d.length:0,h=f!==f,e=null===f,k=f===n;c<b;){var m=Ba((c+b)/2),g=l(d[m]),r=g!==n,
B=g===g;(h?B||a:e?B&&r&&(a||null!=g):k?B&&(a||r):null==g?0:a?g<=f:g<f)?c=m+1:b=m}return Z(b,4294967294)}function aa(d,f,l){if("function"!=typeof d)return wa;if(f===n)return d;switch(l){case 1:return function(l){return d.call(f,l)};case 3:return function(l,a,c){return d.call(f,l,a,c)};case 4:return function(l,a,c,b){return d.call(f,l,a,c,b)};case 5:return function(l,a,c,b,h){return d.call(f,l,a,c,b,h)}}return function(){return d.apply(f,arguments)}}function Bc(d){var f=new be(d.byteLength);(new Cc(f)).set(new Cc(d));
return f}function Dc(d,f,l){for(var a=l.length,c=-1,b=T(d.length-a,0),h=-1,e=f.length,k=N(e+b);++h<e;)k[h]=f[h];for(;++c<a;)k[l[c]]=d[c];for(;b--;)k[h++]=d[c++];return k}function Ec(d,f,l){for(var a=-1,c=l.length,b=-1,h=T(d.length-c,0),e=-1,k=f.length,m=N(h+k);++b<h;)m[b]=d[b];for(h=b;++e<k;)m[h+e]=f[e];for(;++a<c;)m[h+l[a]]=d[b++];return m}function fb(d,f){return function(l,a,c){var b=f?f():{};a=L(a,c,3);if(I(l)){c=-1;for(var h=l.length;++c<h;){var e=l[c];d(b,e,a(e,c,l),l)}}else ga(l,function(f,
l,c){d(b,f,a(f,l,c),c)});return b}}function Fc(d){return K(function(f,l){var a=-1,c=null==f?0:l.length,b=2<c?l[c-2]:n,h=2<c?l[2]:n,e=1<c?l[c-1]:n;"function"==typeof b?(b=aa(b,e,5),c-=2):(b="function"==typeof e?e:n,c-=b?1:0);h&&J(l[0],l[1],h)&&(b=3>c?n:b,c=1);for(;++a<c;)(h=l[a])&&d(f,h,b);return f})}function Gc(d,f){return function(l,a){var c=l?Ra(l):0;if(!ja(c))return d(l,a);for(var b=f?c:-1,h=ha(l);(f?b--:++b<c)&&!1!==a(h[b],b,h););return l}}function Hc(d){return function(f,l,a){var c=ha(f);a=a(f);
for(var b=a.length,h=d?b:-1;d?h--:++h<b;){var e=a[h];if(!1===l(c[e],e,c))break}return f}}function ce(d,f){function l(){return(this&&this!==ka&&this instanceof l?a:d).apply(f,arguments)}var a=gb(d);return l}function hb(d){return function(f){var l=-1;f=Ic(Jc(f));for(var a=f.length,c="";++l<a;)c=d(c,f[l],l);return c}}function gb(d){return function(){var f=arguments;switch(f.length){case 0:return new d;case 1:return new d(f[0]);case 2:return new d(f[0],f[1]);case 3:return new d(f[0],f[1],f[2]);case 4:return new d(f[0],
f[1],f[2],f[3]);case 5:return new d(f[0],f[1],f[2],f[3],f[4]);case 6:return new d(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new d(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var l=Sa(d.prototype),f=d.apply(l,f);return M(f)?f:l}}function Kc(d){function f(l,a,c){c&&J(l,a,c)&&(a=n);l=sa(l,d,n,n,n,n,n,a);l.placeholder=f.placeholder;return l}return f}function Lc(d,f){return K(function(l){var a=l[0];if(null==a)return a;l.push(f);return d.apply(n,l)})}function Mc(d,f){return function(l,a,c){c&&J(l,a,c)&&(a=n);
a=L(a,c,3);if(1==a.length){c=l=I(l)?l:Fb(l);for(var b=a,h=-1,e=c.length,k=f,m=k;++h<e;){var g=c[h],r=+b(g);d(r,k)&&(k=r,m=g)}c=m;if(!l.length||c!==f)return c}return ub(l,a,d,f)}}function Nc(d,f){return function(l,a,c){a=L(a,c,3);return I(l)?(a=z(l,a,f),-1<a?l[a]:n):nc(l,a,d)}}function Oc(d){return function(f,l,a){if(!f||!f.length)return-1;l=L(l,a,3);return z(f,l,d)}}function Pc(d){return function(f,l,a){l=L(l,a,3);return nc(f,l,d,!0)}}function Qc(d){return function(){for(var f,l=arguments.length,
a=d?l:-1,c=0,b=N(l);d?a--:++a<l;){var h=b[c++]=arguments[a];if("function"!=typeof h)throw new ca("Expected a function");!f&&v.prototype.thru&&"wrapper"==ib(h)&&(f=new v([],!0))}for(a=f?-1:l;++a<l;){var h=b[a],c=ib(h),e="wrapper"==c?Gb(h):n;f=e&&Hb(e[0])&&424==e[1]&&!e[4].length&&1==e[9]?f[ib(e[0])].apply(f,e[3]):1==h.length&&Hb(h)?f[c]():f.thru(h)}return function(){var d=arguments,a=d[0];if(f&&1==d.length&&I(a)&&200<=a.length)return f.plant(a).value();for(var c=0,d=l?b[c].apply(this,d):a;++c<l;)d=
b[c].call(this,d);return d}}}function Rc(d,f){return function(l,a,c){return"function"==typeof a&&c===n&&I(l)?d(l,a):f(l,aa(a,c,3))}}function Sc(d){return function(f,l,a){if("function"!=typeof l||a!==n)l=aa(l,a,3);return d(f,l,qa)}}function Tc(d){return function(f,l,a){if("function"!=typeof l||a!==n)l=aa(l,a,3);return d(f,l)}}function Uc(d){return function(f,l,a){var c={};l=L(l,a,3);ma(f,function(f,a,b){b=l(f,a,b);a=d?b:a;f=d?f:b;c[a]=f});return c}}function Vc(d){return function(f,l,a){f=w(f);return(d?
f:"")+Wc(f,l,a)+(d?"":f)}}function Xc(d){var f=K(function(l,c){var b=a(c,f.placeholder);return sa(l,d,n,c,b)});return f}function Yc(d,f){return function(l,a,c,b){var h=3>arguments.length;return"function"==typeof a&&b===n&&I(l)?d(l,a,c,h):ec(l,L(a,b,4),c,h,f)}}function Ib(d,f,l,c,b,h,e,k,m,g){function r(){for(var u=arguments.length,H=u,p=N(u);H--;)p[H]=arguments[H];c&&(p=Dc(p,c,b));h&&(p=Ec(p,h,e));if(E||x){var H=r.placeholder,V=a(p,H),u=u-V.length;if(u<g){var w=k?W(k):n,u=T(g-u,0),R=E?V:n,V=E?n:V,
z=E?p:n,p=E?n:p;f|=E?32:64;f&=~(E?64:32);q||(f&=-4);p=[d,f,l,z,R,p,V,w,m,u];w=Ib.apply(n,p);Hb(d)&&Zc(w,p);w.placeholder=H;return w}}H=t?l:this;w=F?H[d]:d;if(k)for(u=p.length,R=Z(k.length,u),V=W(p);R--;)z=k[R],p[R]=pa(z,u)?V[z]:n;B&&m<p.length&&(p.length=m);this&&this!==ka&&this instanceof r&&(w=oa||gb(d));return w.apply(H,p)}var B=f&128,t=f&1,F=f&2,E=f&8,q=f&4,x=f&16,oa=F?n:gb(d);return r}function Wc(d,f,l){d=d.length;f=+f;if(d>=f||!Ia(f))return"";f-=d;l=null==l?" ":l+"";return $c(l,jb(f/l.length)).slice(0,
f)}function de(d,f,l,a){function c(){for(var f=-1,e=arguments.length,k=-1,m=a.length,g=N(m+e);++k<m;)g[k]=a[k];for(;e--;)g[k++]=arguments[++f];return(this&&this!==ka&&this instanceof c?h:d).apply(b?l:this,g)}var b=f&1,h=gb(d);return c}function Jb(d){var f=Ca[d];return function(d,a){return(a=a===n?0:+a||0)?(a=ee(10,a),f(d*a)/a):f(d)}}function ad(d){return function(f,l,a,c){var b=L(a);return null==a&&b===$a?Eb(f,l,d):Ac(f,l,b(a,c,1),d)}}function sa(d,f,l,c,b,h,e,k){var m=f&2;if(!m&&"function"!=typeof d)throw new ca("Expected a function");
var g=c?c.length:0;g||(f&=-97,c=b=n);g-=b?b.length:0;if(f&64){var r=c,B=b;c=b=n}var t=m?n:Gb(d);l=[d,f,l,c,b,r,B,h,e,k];if(t){c=l[1];f=t[1];k=c|f;b=128==f&&8==c||128==f&&256==c&&l[7].length<=t[8]||384==f&&8==c;if(128>k||b){f&1&&(l[2]=t[2],k|=c&1?0:4);if(c=t[3])b=l[3],l[3]=b?Dc(b,c,t[4]):W(c),l[4]=b?a(l[3],"__lodash_placeholder__"):W(t[4]);if(c=t[5])b=l[5],l[5]=b?Ec(b,c,t[6]):W(c),l[6]=b?a(l[5],"__lodash_placeholder__"):W(t[6]);(c=t[7])&&(l[7]=W(c));f&128&&(l[8]=null==l[8]?t[8]:Z(l[8],t[8]));null==
l[9]&&(l[9]=t[9]);l[0]=t[0];l[1]=k}f=l[1];k=l[9]}l[9]=null==k?m?0:d.length:T(k-g,0)||0;d=1==f?ce(l[0],l[2]):32!=f&&33!=f||l[4].length?Ib.apply(n,l):de.apply(n,l);return(t?bd:Zc)(d,l)}function Xd(d,f,l,a,c,b,h){var e=-1,k=d.length,m=f.length;if(k!=m&&!(c&&m>k))return!1;for(;++e<k;){var g=d[e],m=f[e],r=a?a(c?m:g,c?g:m,e):n;if(r!==n){if(r)continue;return!1}if(c){if(!gc(f,function(d){return g===d||l(g,d,a,c,b,h)}))return!1}else if(g!==m&&!l(g,m,a,c,b,h))return!1}return!0}function Zd(d,f,l){switch(l){case "[object Boolean]":case "[object Date]":return+d==
+f;case "[object Error]":return d.name==f.name&&d.message==f.message;case "[object Number]":return d!=+d?f!=+f:d==+f;case "[object RegExp]":case "[object String]":return d==f+""}return!1}function Yd(d,f,l,a,c,b,h){var e=U(d),k=e.length,m=U(f).length;if(k!=m&&!c)return!1;for(m=k;m--;){var g=e[m];if(!(c?g in f:Q.call(f,g)))return!1}for(var r=c;++m<k;){var g=e[m],B=d[g],t=f[g],F=a?a(c?t:B,c?B:t,g):n;if(F===n?!l(B,t,a,c,b,h):!F)return!1;r||(r="constructor"==g)}return r||(l=d.constructor,a=f.constructor,
!(l!=a&&"constructor"in d&&"constructor"in f)||"function"==typeof l&&l instanceof l&&"function"==typeof a&&a instanceof a)?!0:!1}function L(d,f,l){var a=b.callback||kb,a=a===kb?$a:a;return l?a(d,f,l):a}function ib(d){for(var f=d.name,l=lb[f],a=l?l.length:0;a--;){var c=l[a],b=c.func;if(null==b||b==d)return c.name}return f}function Ga(d,f,l){var a=b.indexOf||Kb,a=a===Kb?e:a;return d?a(d,f,l):a}function rc(d){d=cd(d);for(var f=d.length;f--;){var l=d[f],a;a=d[f][1];a=a===a&&!M(a);l[2]=a}return d}function Ja(d,
f){var l=null==d?n:d[f];return dd(l)?l:n}function Ud(d){var f=d.length,l=new d.constructor(f);f&&"string"==typeof d[0]&&Q.call(d,"index")&&(l.index=d.index,l.input=d.input);return l}function Vd(d){d=d.constructor;"function"==typeof d&&d instanceof d||(d=Da);return new d}function Wd(d,f,l){var a=d.constructor;switch(f){case "[object ArrayBuffer]":return Bc(d);case "[object Boolean]":case "[object Date]":return new a(+d);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return f=
d.buffer,new a(l?Bc(f):f,d.byteOffset,d.length);case "[object Number]":case "[object String]":return new a(d);case "[object RegExp]":var c=new a(d.source,ed.exec(d));c.lastIndex=d.lastIndex}return c}function Lb(d,f,a){null==d||Aa(f,d)||(f=ra(f),d=1==f.length?d:za(d,da(f,0,-1)),f=Qa(f));f=null==d?d:d[f];return null==f?n:f.apply(d,a)}function S(d){return null!=d&&ja(Ra(d))}function pa(d,f){d="number"==typeof d||fe.test(d)?+d:-1;return-1<d&&0==d%1&&d<(null==f?9007199254740991:f)}function J(d,f,a){if(!M(a))return!1;
var c=typeof f;return("number"==c?S(a)&&pa(f,a.length):"string"==c&&f in a)?(f=a[f],d===d?d===f:f!==f):!1}function Aa(d,f){var a=typeof d;return"string"==a&&ge.test(d)||"number"==a?!0:I(d)?!1:!E.test(d)||null!=f&&d in ha(f)}function Hb(d){var f=ib(d);if(!(f in y.prototype))return!1;f=b[f];if(d===f)return!0;f=Gb(f);return!!f&&d===f[0]}function ja(d){return"number"==typeof d&&-1<d&&0==d%1&&9007199254740991>=d}function fd(d,f){return d===n?f:Mb(d,f,fd)}function gd(d,f){d=ha(d);for(var a=-1,c=f.length,
b={};++a<c;){var h=f[a];h in d&&(b[h]=d[h])}return b}function hd(d,f){var a={};oc(d,function(d,c,b){f(d,c,b)&&(a[c]=d)});return a}function id(d){for(var f=qa(d),a=f.length,c=a&&d.length,b=!!c&&ja(c)&&(I(d)||na(d)),h=-1,e=[];++h<a;){var k=f[h];(b&&pa(k,c)||Q.call(d,k))&&e.push(k)}return e}function Fb(d){return null==d?[]:S(d)?M(d)?d:Da(d):mb(d)}function ha(d){return M(d)?d:Da(d)}function ra(d){if(I(d))return d;var f=[];w(d).replace(he,function(d,a,c,b){f.push(c?b.replace(ie,"$1"):a||d)});return f}
function fc(d){return d instanceof y?d.clone():new v(d.__wrapped__,d.__chain__,W(d.__actions__))}function jd(d,f,a){if(!d||!d.length)return[];if(a?J(d,f,a):null==f)f=1;return da(d,0>f?0:f)}function kd(d,f,a){var c=d?d.length:0;if(!c)return[];if(a?J(d,f,a):null==f)f=1;f=c-(+f||0);return da(d,0,0>f?0:f)}function ld(d){return d?d[0]:n}function Kb(d,f,a){var c=d?d.length:0;if(!c)return-1;if("number"==typeof a)a=0>a?T(c+a,0):a;else if(a)return a=Eb(d,f),a<c&&(f===f?f===d[a]:d[a]!==d[a])?a:-1;return e(d,
f,a||0)}function Qa(d){var f=d?d.length:0;return f?d[f-1]:n}function md(d){return jd(d,1)}function nd(d,f,a,c){if(!d||!d.length)return[];null!=f&&"boolean"!=typeof f&&(c=a,a=J(d,f,c)?n:f,f=!1);var b=L();if(null!=a||b!==$a)a=b(a,c,3);if(f&&Ga()==e){f=a;var h;a=-1;c=d.length;for(var b=-1,k=[];++a<c;){var m=d[a],g=f?f(m,a,d):m;a&&h===g||(h=g,k[++b]=m)}d=k}else d=Cb(d,a);return d}function Nb(d){if(!d||!d.length)return[];var f=-1,a=0;d=Ka(d,function(d){if(S(d))return a=T(d.length,a),!0});for(var c=N(a);++f<
a;)c[f]=Fa(d,Ab(f));return c}function od(d,f,a){if(!d||!d.length)return[];d=Nb(d);if(null==f)return d;f=aa(f,a,4);return Fa(d,function(d){return La(d,f,n,!0)})}function pd(d,f){var a=-1,c=d?d.length:0,b={};for(!c||f||I(d[0])||(f=[]);++a<c;){var h=d[a];f?b[h]=f[a]:h&&(b[h[0]]=h[1])}return b}function qd(d){d=b(d);d.__chain__=!0;return d}function Ob(d,f,a){return f.call(a,d)}function rd(d,f,a){var c=I(d)?ua:tb;a&&J(d,f,a)&&(f=n);if("function"!=typeof f||a!==n)f=L(f,a,3);return c(d,f)}function Pb(d,f,
a){var c=I(d)?Ka:mc;f=L(f,a,3);return c(d,f)}function Qb(d,f,a,c){var b=d?Ra(d):0;ja(b)||(d=mb(d),b=d.length);a="number"!=typeof a||c&&J(f,a,c)?0:0>a?T(b+a,0):a||0;return"string"==typeof d||!I(d)&&Rb(d)?a<=b&&-1<d.indexOf(f,a):!!b&&-1<Ga(d,f,a)}function Sb(d,f,a){var c=I(d)?Fa:zb;f=L(f,a,3);return c(d,f)}function nb(d,f,a){if(a?J(d,f,a):null==f){d=Fb(d);var c=d.length;return 0<c?d[Bb(0,c-1)]:n}a=-1;d=sd(d);var c=d.length,b=c-1;for(f=Z(0>f?0:+f||0,c);++a<f;){var c=Bb(a,b),h=d[c];d[c]=d[a];d[a]=h}d.length=
f;return d}function td(d,f,a){var c=I(d)?gc:$d;a&&J(d,f,a)&&(f=n);if("function"!=typeof f||a!==n)f=L(f,a,3);return c(d,f)}function ud(d,f){var a;if("function"!=typeof f)if("function"==typeof d){var c=d;d=f;f=c}else throw new ca("Expected a function");return function(){0<--d&&(a=f.apply(this,arguments));1>=d&&(f=n);return a}}function vd(d,f,a){function c(f,a){a&&Ta(a);m=t=F=n;f&&(E=Ua(),g=d.apply(B,k),t||m||(k=B=n))}function b(){var d=f-(Ua()-r);0>=d||d>f?c(F,m):t=bb(b,d)}function h(){c(x,t)}function e(){k=
arguments;r=Ua();B=this;F=x&&(t||!u);if(!1===q)var a=u&&!t;else{m||u||(E=r);var c=q-(r-E),l=0>=c||c>q;l?(m&&(m=Ta(m)),E=r,g=d.apply(B,k)):m||(m=bb(h,c))}l&&t?t=Ta(t):t||f===q||(t=bb(b,f));a&&(l=!0,g=d.apply(B,k));!l||t||m||(k=B=n);return g}var k,m,g,r,B,t,F,E=0,q=!1,x=!0;if("function"!=typeof d)throw new ca("Expected a function");f=0>f?0:+f||0;if(!0===a)var u=!0,x=!1;else M(a)&&(u=!!a.leading,q="maxWait"in a&&T(+a.maxWait||0,f),x="trailing"in a?!!a.trailing:x);e.cancel=function(){t&&Ta(t);m&&Ta(m);
E=0;m=t=F=n};return e}function Tb(d,f){if("function"!=typeof d||f&&"function"!=typeof f)throw new ca("Expected a function");var a=function(){var c=arguments,b=f?f.apply(this,c):c[0],h=a.cache;if(h.has(b))return h.get(b);c=d.apply(this,c);a.cache=h.set(b,c);return c};a.cache=new Tb.Cache;return a}function K(d,f){if("function"!=typeof d)throw new ca("Expected a function");f=T(f===n?d.length-1:+f||0,0);return function(){for(var a=arguments,c=-1,b=T(a.length-f,0),h=N(b);++c<b;)h[c]=a[f+c];switch(f){case 0:return d.call(this,
h);case 1:return d.call(this,a[0],h);case 2:return d.call(this,a[0],a[1],h)}b=N(f+1);for(c=-1;++c<f;)b[c]=a[c];b[f]=h;return d.apply(this,b)}}function wd(d,f){return d>f}function na(d){return t(d)&&S(d)&&Q.call(d,"callee")&&!je.call(d,"callee")}function xd(d,f,a,c){c=(a="function"==typeof a?aa(a,c,3):n)?a(d,f):n;return c===n?cb(d,f,a):!!c}function Ub(d){return t(d)&&"string"==typeof d.message&&"[object Error]"==ba.call(d)}function ya(d){return M(d)&&"[object Function]"==ba.call(d)}function M(d){var f=
typeof d;return!!d&&("object"==f||"function"==f)}function dd(d){return null==d?!1:ya(d)?ke.test(yd.call(d)):t(d)&&le.test(d)}function zd(d){return"number"==typeof d||t(d)&&"[object Number]"==ba.call(d)}function db(d){var f;if(!t(d)||"[object Object]"!=ba.call(d)||na(d)||!(Q.call(d,"constructor")||(f=d.constructor,"function"!=typeof f||f instanceof f)))return!1;var a;oc(d,function(d,f){a=f});return a===n||Q.call(d,a)}function Ad(d){return M(d)&&"[object RegExp]"==ba.call(d)}function Rb(d){return"string"==
typeof d||t(d)&&"[object String]"==ba.call(d)}function Ha(d){return t(d)&&ja(d.length)&&!!P[ba.call(d)]}function Bd(d,f){return d<f}function sd(d){var f=d?Ra(d):0;return ja(f)?f?W(d):[]:mb(d)}function tc(d){return ic(d,qa(d))}function Vb(d){return yb(d,qa(d))}function qa(d){if(null==d)return[];M(d)||(d=Da(d));for(var f=d.length,f=f&&ja(f)&&(I(d)||na(d))&&f||0,a=d.constructor,c=-1,a="function"==typeof a&&a.prototype===d,b=N(f),h=0<f;++c<f;)b[c]=c+"";for(var e in d)h&&pa(e,f)||"constructor"==e&&(a||
!Q.call(d,e))||b.push(e);return b}function cd(d){d=ha(d);for(var f=-1,a=U(d),c=a.length,b=N(c);++f<c;){var h=a[f];b[f]=[h,d[h]]}return b}function mb(d){return Db(d,U(d))}function Jc(d){return(d=w(d))&&d.replace(me,C).replace(ob,"")}function $c(d,f){var a="";d=w(d);f=+f;if(1>f||!d||!Ia(f))return a;do f%2&&(a+=d),f=Ba(f/2),d+=d;while(f);return a}function Cd(d,f,a){var c=d;d=w(d);if(!d)return d;if(a?J(c,f,a):null==f)return d.slice(h(d),m(d)+1);f+="";return d.slice(u(d,f),q(d,f)+1)}function Ic(d,f,a){a&&
J(d,f,a)&&(f=n);d=w(d);return d.match(f||ne)||[]}function kb(d,f,a){a&&J(d,f,a)&&(f=n);return t(d)?Dd(d):$a(d,f)}function wa(d){return d}function Dd(d){return Oa(xa(d,!0))}function Wb(d,f,a){if(null==a){var c=M(f),b=c?U(f):n;((b=b&&b.length?yb(f,b):n)?b.length:c)||(b=!1,a=f,f=d,d=this)}b||(b=yb(f,U(f)));var h=!0,c=-1,e=ya(d),k=b.length;!1===a?h=!1:M(a)&&"chain"in a&&(h=a.chain);for(;++c<k;){a=b[c];var m=f[a];d[a]=m;e&&(d.prototype[a]=function(f){return function(){var a=this.__chain__;if(h||a){var c=
d(this.__wrapped__);(c.__actions__=W(this.__actions__)).push({func:f,args:arguments,thisArg:d});c.__chain__=a;return c}return f.apply(d,Ma([this.value()],arguments))}}(m))}return d}function Ed(){}function ab(d){return Aa(d)?Ab(d):dc(d)}c=c?ta.defaults(ka.Object(),c,ta.pick(ka,oe)):ka;var N=c.Array,Fd=c.Date,pe=c.Error,Gd=c.Function,Ca=c.Math,Hd=c.Number,Da=c.Object,Xb=c.RegExp,Id=c.String,ca=c.TypeError,Jd=N.prototype,Yb=Da.prototype,qe=Id.prototype,yd=Gd.prototype.toString,Q=Yb.hasOwnProperty,re=
0,ba=Yb.toString,se=ka._,ke=Xb("^"+yd.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=c.ArrayBuffer,Ta=c.clearTimeout,te=c.parseFloat,ee=Ca.pow,je=Yb.propertyIsEnumerable,Za=Ja(c,"Set"),bb=c.setTimeout,vc=Jd.splice,Cc=c.Uint8Array,Kd=Ja(c,"WeakMap"),jb=Ca.ceil,Ya=Ja(Da,"create"),Ba=Ca.floor,ue=Ja(N,"isArray"),Ia=c.isFinite,Ld=Ja(Da,"keys"),T=Ca.max,Z=Ca.min,ve=Ja(Fd,"now"),we=c.parseInt,wc=Ca.random,xe=Hd.NEGATIVE_INFINITY,
Xa=Hd.POSITIVE_INFINITY,pb=Kd&&new Kd,lb={};b.support={};b.templateSettings={escape:ia,evaluate:qb,interpolate:Ea,variable:"",imports:{_:b}};var Sa=function(){function d(){}return function(f){if(M(f)){d.prototype=f;var a=new d;d.prototype=n}return a||{}}}(),ga=Gc(ma),Zb=Gc(xb,!0),wb=Hc(),pc=Hc(!0),bd=pb?function(d,f){pb.set(d,f);return d}:wa,Gb=pb?function(d){return pb.get(d)}:Ed,Ra=Ab("length"),Zc=function(){var d=0,f=0;return function(a,c){var b=Ua(),h=16-(b-f);f=b;if(0<h){if(150<=++d)return a}else d=
0;return bd(a,c)}}(),ye=K(function(d,f){return t(d)&&S(d)?Pa(d,Y(f,!1,!0)):[]}),ze=Oc(),Ae=Oc(!0),Be=K(function(d){for(var f=d.length,a=f,c=N(n),b=Ga(),h=b==e,k=[];a--;){var m=d[a]=S(m=d[a])?m:[];c[a]=h&&120<=m.length?Ya&&Za?new ea(a&&m):null:null}var h=d[0],g=-1,n=h?h.length:0,r=c[0];a:for(;++g<n;)if(m=h[g],0>(r?la(r,m):b(k,m,0))){for(a=f;--a;){var B=c[a];if(0>(B?la(B,m):b(d[a],m,0)))continue a}r&&r.push(m);k.push(m)}return k}),Ce=K(function(d,f){f=Y(f);var a=jc(d,f);uc(d,f.sort(p));return a}),De=
ad(),Ee=ad(!0),Fe=K(function(d){return Cb(Y(d,!1,!0))}),Ge=K(function(d,f){return S(d)?Pa(d,f):[]}),He=K(Nb),Ie=K(function(d){var f=d.length,a=2<f?d[f-2]:n,c=1<f?d[f-1]:n;2<f&&"function"==typeof a?f-=2:(a=1<f&&"function"==typeof c?(--f,c):n,c=n);d.length=f;return od(d,a,c)}),Je=K(function(d){d=Y(d);return this.thru(function(f){f=I(f)?f:[ha(f)];for(var a=d,c=-1,b=f.length,h=-1,e=a.length,k=N(b+e);++c<b;)k[c]=f[c];for(;++h<e;)k[c++]=a[h];return k})}),Ke=K(function(d,f){return jc(d,Y(f))}),Le=fb(function(d,
f,a){Q.call(d,a)?++d[a]:d[a]=1}),$b=Nc(ga),Me=Nc(Zb,!0),Md=Rc(fa,ga),Nd=Rc(function(d,f){for(var a=d.length;a--&&!1!==f(d[a],a,d););return d},Zb),Ne=fb(function(d,f,a){Q.call(d,a)?d[a].push(f):d[a]=[f]}),Oe=fb(function(d,f,a){d[a]=f}),Pe=K(function(d,f,a){var c=-1,b="function"==typeof f,h=Aa(f),e=S(d)?N(d.length):[];ga(d,function(d){var k=b?f:h&&null!=d?d[f]:n;e[++c]=k?k.apply(d,a):Lb(d,f,a)});return e}),Qe=fb(function(d,f,a){d[a?0:1].push(f)},function(){return[[],[]]}),ac=Yc(La,ga),Od=Yc(function(d,
f,a,c){var b=d.length;for(c&&b&&(a=d[--b]);b--;)a=f(a,d[b],b,d);return a},Zb),Re=K(function(d,f){if(null==d)return[];var a=f[2];a&&J(f[0],f[1],a)&&(f.length=1);return yc(d,Y(f),[])}),Ua=ve||function(){return(new Fd).getTime()},Pd=K(function(d,f,c){var b=1;if(c.length)var h=a(c,Pd.placeholder),b=b|32;return sa(d,b,f,c,h)}),Se=K(function(d,f){f=f.length?Y(f):Vb(d);for(var a=-1,c=f.length;++a<c;){var b=f[a];d[b]=sa(d[b],1,d)}return d}),Qd=K(function(d,f,c){var b=3;if(c.length)var h=a(c,Qd.placeholder),
b=b|32;return sa(f,b,d,c,h)}),Te=Kc(8),Ue=Kc(16),Ve=K(function(d,f){return lc(d,1,f)}),We=K(function(d,f,a){return lc(d,f,a)}),Xe=Qc(),bc=Qc(!0),Ye=K(function(d,f){f=Y(f);if("function"!=typeof d||!ua(f,D))throw new ca("Expected a function");var a=f.length;return K(function(c){for(var b=Z(c.length,a);b--;)c[b]=f[b](c[b]);return d.apply(this,c)})}),Ze=Xc(32),$e=Xc(64),af=K(function(d,a){return sa(d,256,n,n,n,Y(a))}),I=ue||function(d){return t(d)&&ja(d.length)&&"[object Array]"==ba.call(d)},Mb=Fc(sc),
cc=Fc(function(d,a,c){return c?vb(d,a,c):Na(d,a)}),bf=Lc(cc,function(d,a){return d===n?a:d}),cf=Lc(Mb,fd),df=Pc(ma),ef=Pc(xb),ff=Sc(wb),gf=Sc(pc),hf=Tc(ma),jf=Tc(xb),U=Ld?function(d){var a=null==d?n:d.constructor;return"function"==typeof a&&a.prototype===d||"function"!=typeof d&&S(d)?id(d):M(d)?Ld(d):[]}:id,kf=Uc(!0),lf=Uc(),mf=K(function(d,a){if(null==d)return{};if("function"!=typeof a[0])return a=Fa(Y(a),Id),gd(d,Pa(qa(d),a));var c=aa(a[0],a[1],3);return hd(d,function(d,a,f){return!c(d,a,f)})}),
nf=K(function(d,a){return null==d?{}:"function"==typeof a[0]?hd(d,aa(a[0],a[1],3)):gd(d,Y(a))}),of=hb(function(d,a,c){a=a.toLowerCase();return d+(c?a.charAt(0).toUpperCase()+a.slice(1):a)}),pf=hb(function(d,a,c){return d+(c?"-":"")+a.toLowerCase()}),qf=Vc(),rf=Vc(!0),sf=hb(function(d,a,c){return d+(c?"_":"")+a.toLowerCase()}),tf=hb(function(d,a,c){return d+(c?" ":"")+(a.charAt(0).toUpperCase()+a.slice(1))}),Rd=K(function(d,a){try{return d.apply(n,a)}catch(c){return Ub(c)?c:new pe(c)}}),uf=K(function(d,
a){return function(c){return Lb(c,d,a)}}),vf=K(function(d,a){return function(c){return Lb(d,c,a)}}),wf=Jb("ceil"),xf=Jb("floor"),yf=Mc(wd,xe),zf=Mc(Bd,Xa),Af=Jb("round");b.prototype=g.prototype;v.prototype=Sa(g.prototype);v.prototype.constructor=v;y.prototype=Sa(g.prototype);y.prototype.constructor=y;va.prototype["delete"]=function(d){return this.has(d)&&delete this.__data__[d]};va.prototype.get=function(d){return"__proto__"==d?n:this.__data__[d]};va.prototype.has=function(d){return"__proto__"!=d&&
Q.call(this.__data__,d)};va.prototype.set=function(d,a){"__proto__"!=d&&(this.__data__[d]=a);return this};ea.prototype.push=function(d){var a=this.data;"string"==typeof d||M(d)?a.set.add(d):a.hash[d]=!0};Tb.Cache=va;b.after=function(d,a){if("function"!=typeof a)if("function"==typeof d){var c=d;d=a;a=c}else throw new ca("Expected a function");d=Ia(d=+d)?d:0;return function(){if(1>--d)return a.apply(this,arguments)}};b.ary=function(d,a,c){c&&J(d,a,c)&&(a=n);a=d&&null==a?d.length:T(+a||0,0);return sa(d,
128,n,n,n,n,a)};b.assign=cc;b.at=Ke;b.before=ud;b.bind=Pd;b.bindAll=Se;b.bindKey=Qd;b.callback=kb;b.chain=qd;b.chunk=function(d,a,c){a=(c?J(d,a,c):null==a)?1:T(Ba(a)||1,1);c=0;for(var b=d?d.length:0,h=-1,e=N(jb(b/a));c<b;)e[++h]=da(d,c,c+=a);return e};b.compact=function(d){for(var a=-1,c=d?d.length:0,b=-1,h=[];++a<c;){var e=d[a];e&&(h[++b]=e)}return h};b.constant=function(d){return function(){return d}};b.countBy=Le;b.create=function(d,a,c){var b=Sa(d);c&&J(d,a,c)&&(a=n);return a?Na(b,a):b};b.curry=
Te;b.curryRight=Ue;b.debounce=vd;b.defaults=bf;b.defaultsDeep=cf;b.defer=Ve;b.delay=We;b.difference=ye;b.drop=jd;b.dropRight=kd;b.dropRightWhile=function(d,a,c){return d&&d.length?eb(d,L(a,c,3),!0,!0):[]};b.dropWhile=function(d,a,c){return d&&d.length?eb(d,L(a,c,3),!0):[]};b.fill=function(d,a,c,b){var h=d?d.length:0;if(!h)return[];c&&"number"!=typeof c&&J(d,a,c)&&(c=0,b=h);h=d.length;c=null==c?0:+c||0;0>c&&(c=-c>h?0:h+c);b=b===n||b>h?h:+b||0;0>b&&(b+=h);h=c>b?0:b>>>0;for(c>>>=0;c<h;)d[c++]=a;return d};
b.filter=Pb;b.flatten=function(d,a,c){var b=d?d.length:0;c&&J(d,a,c)&&(a=!1);return b?Y(d,a):[]};b.flattenDeep=function(d){return d&&d.length?Y(d,!0):[]};b.flow=Xe;b.flowRight=bc;b.forEach=Md;b.forEachRight=Nd;b.forIn=ff;b.forInRight=gf;b.forOwn=hf;b.forOwnRight=jf;b.functions=Vb;b.groupBy=Ne;b.indexBy=Oe;b.initial=function(d){return kd(d,1)};b.intersection=Be;b.invert=function(d,a,c){c&&J(d,a,c)&&(a=n);c=-1;for(var b=U(d),h=b.length,e={};++c<h;){var k=b[c],m=d[k];a?Q.call(e,m)?e[m].push(k):e[m]=
[k]:e[m]=k}return e};b.invoke=Pe;b.keys=U;b.keysIn=qa;b.map=Sb;b.mapKeys=kf;b.mapValues=lf;b.matches=Dd;b.matchesProperty=function(d,a){return kc(d,xa(a,!0))};b.memoize=Tb;b.merge=Mb;b.method=uf;b.methodOf=vf;b.mixin=Wb;b.modArgs=Ye;b.negate=function(d){if("function"!=typeof d)throw new ca("Expected a function");return function(){return!d.apply(this,arguments)}};b.omit=mf;b.once=function(d){return ud(2,d)};b.pairs=cd;b.partial=Ze;b.partialRight=$e;b.partition=Qe;b.pick=nf;b.pluck=function(d,a){return Sb(d,
ab(a))};b.property=ab;b.propertyOf=function(d){return function(a){return za(d,ra(a),a+"")}};b.pull=function(){var d=arguments,a=d[0];if(!a||!a.length)return a;for(var c=0,b=Ga(),h=d.length;++c<h;)for(var e=0,k=d[c];-1<(e=b(a,k,e));)vc.call(a,e,1);return a};b.pullAt=Ce;b.range=function(d,a,c){c&&J(d,a,c)&&(a=c=n);d=+d||0;c=null==c?1:+c||0;null==a?(a=d,d=0):a=+a||0;var b=-1;a=T(jb((a-d)/(c||1)),0);for(var h=N(a);++b<a;)h[b]=d,d+=c;return h};b.rearg=af;b.reject=function(d,a,c){var b=I(d)?Ka:mc;a=L(a,
c,3);return b(d,function(d,c,b){return!a(d,c,b)})};b.remove=function(d,a,c){var b=[];if(!d||!d.length)return b;var h=-1,e=[],k=d.length;for(a=L(a,c,3);++h<k;)c=d[h],a(c,h,d)&&(b.push(c),e.push(h));uc(d,e);return b};b.rest=md;b.restParam=K;b.set=function(d,a,c){if(null==d)return d;var b=a+"";a=null!=d[b]||Aa(a,d)?[b]:ra(a);for(var b=-1,h=a.length,e=h-1,k=d;null!=k&&++b<h;){var m=a[b];M(k)&&(b==e?k[m]=c:null==k[m]&&(k[m]=pa(a[b+1])?[]:{}));k=k[m]}return d};b.shuffle=function(d){return nb(d,Xa)};b.slice=
function(d,a,c){var b=d?d.length:0;if(!b)return[];c&&"number"!=typeof c&&J(d,a,c)&&(a=0,c=b);return da(d,a,c)};b.sortBy=function(d,a,c){if(null==d)return[];c&&J(d,a,c)&&(a=n);var b=-1;a=L(a,c,3);d=zb(d,function(d,c,h){return{criteria:a(d,c,h),index:++b,value:d}});return xc(d,A)};b.sortByAll=Re;b.sortByOrder=function(d,a,c,b){if(null==d)return[];b&&J(a,c,b)&&(c=n);I(a)||(a=null==a?[]:[a]);I(c)||(c=null==c?[]:[c]);return yc(d,a,c)};b.spread=function(d){if("function"!=typeof d)throw new ca("Expected a function");
return function(a){return d.apply(this,a)}};b.take=function(d,a,c){if(!d||!d.length)return[];if(c?J(d,a,c):null==a)a=1;return da(d,0,0>a?0:a)};b.takeRight=function(d,a,c){var b=d?d.length:0;if(!b)return[];if(c?J(d,a,c):null==a)a=1;a=b-(+a||0);return da(d,0>a?0:a)};b.takeRightWhile=function(d,a,c){return d&&d.length?eb(d,L(a,c,3),!1,!0):[]};b.takeWhile=function(d,a,c){return d&&d.length?eb(d,L(a,c,3)):[]};b.tap=function(d,a,c){a.call(c,d);return d};b.throttle=function(d,a,c){var b=!0,h=!0;if("function"!=
typeof d)throw new ca("Expected a function");!1===c?b=!1:M(c)&&(b="leading"in c?!!c.leading:b,h="trailing"in c?!!c.trailing:h);return vd(d,a,{leading:b,maxWait:+a,trailing:h})};b.thru=Ob;b.times=function(d,a,c){d=Ba(d);if(1>d||!Ia(d))return[];var b=-1,h=N(Z(d,4294967295));for(a=aa(a,c,1);++b<d;)4294967295>b?h[b]=a(b):a(b);return h};b.toArray=sd;b.toPlainObject=tc;b.transform=function(d,a,c,b){var h=I(d)||Ha(d);a=L(a,b,4);null==c&&(h||M(d)?(b=d.constructor,c=h?I(d)?new b:[]:Sa(ya(b)?b.prototype:n)):
c={});(h?fa:ma)(d,function(d,b,h){return a(c,d,b,h)});return c};b.union=Fe;b.uniq=nd;b.unzip=Nb;b.unzipWith=od;b.values=mb;b.valuesIn=function(d){return Db(d,qa(d))};b.where=function(d,a){return Pb(d,Oa(a))};b.without=Ge;b.wrap=function(d,a){a=null==a?wa:a;return sa(a,32,n,[d],[])};b.xor=function(){for(var d=-1,a=arguments.length;++d<a;){var c=arguments[d];if(S(c))var b=b?Ma(Pa(b,c),Pa(c,b)):c}return b?Cb(b):[]};b.zip=He;b.zipObject=pd;b.zipWith=Ie;b.backflow=bc;b.collect=Sb;b.compose=bc;b.each=Md;
b.eachRight=Nd;b.extend=cc;b.iteratee=kb;b.methods=Vb;b.object=pd;b.select=Pb;b.tail=md;b.unique=nd;Wb(b,b);b.add=function(d,a){return(+d||0)+(+a||0)};b.attempt=Rd;b.camelCase=of;b.capitalize=function(d){return(d=w(d))&&d.charAt(0).toUpperCase()+d.slice(1)};b.ceil=wf;b.clone=function(d,a,c,b){a&&"boolean"!=typeof a&&J(d,a,c)?a=!1:"function"==typeof a&&(b=c,c=a,a=!1);return"function"==typeof c?xa(d,a,aa(c,b,1)):xa(d,a)};b.cloneDeep=function(d,a,c){return"function"==typeof a?xa(d,!0,aa(a,c,1)):xa(d,
!0)};b.deburr=Jc;b.endsWith=function(d,a,c){d=w(d);a+="";var b=d.length;c=c===n?b:Z(0>c?0:+c||0,b);c-=a.length;return 0<=c&&d.indexOf(a,c)==c};b.escape=function(d){return(d=w(d))&&Va.test(d)?d.replace(R,G):d};b.escapeRegExp=function(d){return(d=w(d))&&X.test(d)?d.replace(Sd,x):d||"(?:)"};b.every=rd;b.find=$b;b.findIndex=ze;b.findKey=df;b.findLast=Me;b.findLastIndex=Ae;b.findLastKey=ef;b.findWhere=function(d,a){return $b(d,Oa(a))};b.first=ld;b.floor=xf;b.get=function(d,a,c){d=null==d?n:za(d,ra(a),
a+"");return d===n?c:d};b.gt=wd;b.gte=function(d,a){return d>=a};b.has=function(d,a){if(null==d)return!1;var c=Q.call(d,a);if(!c&&!Aa(a)){a=ra(a);d=1==a.length?d:za(d,da(a,0,-1));if(null==d)return!1;a=Qa(a);c=Q.call(d,a)}return c||ja(d.length)&&pa(a,d.length)&&(I(d)||na(d))};b.identity=wa;b.includes=Qb;b.indexOf=Kb;b.inRange=function(d,a,c){a=+a||0;c===n?(c=a,a=0):c=+c||0;return d>=Z(a,c)&&d<T(a,c)};b.isArguments=na;b.isArray=I;b.isBoolean=function(d){return!0===d||!1===d||t(d)&&"[object Boolean]"==
ba.call(d)};b.isDate=function(d){return t(d)&&"[object Date]"==ba.call(d)};b.isElement=function(d){return!!d&&1===d.nodeType&&t(d)&&!db(d)};b.isEmpty=function(d){return null==d?!0:S(d)&&(I(d)||Rb(d)||na(d)||t(d)&&ya(d.splice))?!d.length:!U(d).length};b.isEqual=xd;b.isError=Ub;b.isFinite=function(d){return"number"==typeof d&&Ia(d)};b.isFunction=ya;b.isMatch=function(d,a,c,b){c="function"==typeof c?aa(c,b,3):n;return qc(d,rc(a),c)};b.isNaN=function(d){return zd(d)&&d!=+d};b.isNative=dd;b.isNull=function(d){return null===
d};b.isNumber=zd;b.isObject=M;b.isPlainObject=db;b.isRegExp=Ad;b.isString=Rb;b.isTypedArray=Ha;b.isUndefined=function(d){return d===n};b.kebabCase=pf;b.last=Qa;b.lastIndexOf=function(d,a,c){var b=d?d.length:0;if(!b)return-1;var h=b;if("number"==typeof c)h=(0>c?T(b+c,0):Z(c||0,b-1))+1;else if(c)return h=Eb(d,a,!0)-1,d=d[h],(a===a?a===d:d!==d)?h:-1;if(a!==a)return k(d,h,!0);for(;h--;)if(d[h]===a)return h;return-1};b.lt=Bd;b.lte=function(d,a){return d<=a};b.max=yf;b.min=zf;b.noConflict=function(){ka._=
se;return this};b.noop=Ed;b.now=Ua;b.pad=function(d,a,c){d=w(d);a=+a;var b=d.length;if(b>=a||!Ia(a))return d;b=(a-b)/2;a=Ba(b);b=jb(b);c=Wc("",b,c);return c.slice(0,a)+d+c};b.padLeft=qf;b.padRight=rf;b.parseInt=function(d,a,c){(c?J(d,a,c):null==a)?a=0:a&&(a=+a);d=Cd(d);return we(d,a||(Bf.test(d)?16:10))};b.random=function(d,a,c){c&&J(d,a,c)&&(a=c=n);var b=null==d,h=null==a;null==c&&(h&&"boolean"==typeof d?(c=d,d=1):"boolean"==typeof a&&(c=a,h=!0));b&&h&&(a=1,h=!1);d=+d||0;h?(a=d,d=0):a=+a||0;return c||
d%1||a%1?(c=wc(),Z(d+c*(a-d+te("1e-"+((c+"").length-1))),a)):Bb(d,a)};b.reduce=ac;b.reduceRight=Od;b.repeat=$c;b.result=function(d,a,c){var b=null==d?n:d[a];b===n&&(null==d||Aa(a,d)||(a=ra(a),d=1==a.length?d:za(d,da(a,0,-1)),b=null==d?n:d[Qa(a)]),b=b===n?c:b);return ya(b)?b.call(d):b};b.round=Af;b.runInContext=H;b.size=function(a){var c=a?Ra(a):0;return ja(c)?c:U(a).length};b.snakeCase=sf;b.some=td;b.sortedIndex=De;b.sortedLastIndex=Ee;b.startCase=tf;b.startsWith=function(a,c,b){a=w(a);b=null==b?
0:Z(0>b?0:+b||0,a.length);return a.lastIndexOf(c,b)==b};b.sum=function(a,c,b){b&&J(a,c,b)&&(c=n);c=L(c,b,3);if(1==c.length){a=I(a)?a:Fb(a);b=a.length;for(var h=0;b--;)h+=+c(a[b])||0;a=h}else a=ae(a,c);return a};b.template=function(a,c,h){var e=b.templateSettings;h&&J(a,c,h)&&(c=h=n);a=w(a);c=vb(Na({},h||c),e,hc);h=vb(Na({},c.imports),e.imports,hc);var k=U(h),m=Db(h,k),g,t,F=0;h=c.interpolate||rb;var E="__p += '";h=Xb((c.escape||rb).source+"|"+h.source+"|"+(h===Ea?Cf:rb).source+"|"+(c.evaluate||rb).source+
"|$","g");var q="//# sourceURL="+("sourceURL"in c?c.sourceURL:"lodash.templateSources["+ ++Df+"]")+"\n";a.replace(h,function(c,b,f,h,e,l){f||(f=h);E+=a.slice(F,l).replace(Ef,r);b&&(g=!0,E+="' +\n__e("+b+") +\n'");e&&(t=!0,E+="';\n"+e+";\n__p += '");f&&(E+="' +\n((__t = ("+f+")) == null ? '' : __t) +\n'");F=l+c.length;return c});E+="';\n";(c=c.variable)||(E="with (obj) {\n"+E+"\n}\n");E=(t?E.replace(sb,""):E).replace(B,"$1").replace(oa,"$1;");E="function("+(c||"obj")+") {\n"+(c?"":"obj || (obj = {});\n")+
"var __t, __p = ''"+(g?", __e = _.escape":"")+(t?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+E+"return __p\n}";c=Rd(function(){return Gd(k,q+"return "+E).apply(n,m)});c.source=E;if(Ub(c))throw c;return c};b.trim=Cd;b.trimLeft=function(a,c,b){var e=a;return(a=w(a))?(b?J(e,c,b):null==c)?a.slice(h(a)):a.slice(u(a,c+"")):a};b.trimRight=function(a,c,b){var h=a;return(a=w(a))?(b?J(h,c,b):null==c)?a.slice(0,m(a)+1):a.slice(0,q(a,c+"")+1):a};b.trunc=function(a,
c,b){b&&J(a,c,b)&&(c=n);var h=30;b="...";if(null!=c)if(M(c)){var e="separator"in c?c.separator:e,h="length"in c?+c.length||0:h;b="omission"in c?w(c.omission):b}else h=+c||0;a=w(a);if(h>=a.length)return a;h-=b.length;if(1>h)return b;c=a.slice(0,h);if(null==e)return c+b;if(Ad(e)){if(a.slice(h).search(e)){var k,m=a.slice(0,h);e.global||(e=Xb(e.source,(ed.exec(e)||"")+"g"));for(e.lastIndex=0;a=e.exec(m);)k=a.index;c=c.slice(0,null==k?h:k)}}else a.indexOf(e,h)!=h&&(e=c.lastIndexOf(e),-1<e&&(c=c.slice(0,
e)));return c+b};b.unescape=function(a){return(a=w(a))&&Wa.test(a)?a.replace(V,F):a};b.uniqueId=function(a){var c=++re;return w(a)+c};b.words=Ic;b.all=rd;b.any=td;b.contains=Qb;b.eq=xd;b.detect=$b;b.foldl=ac;b.foldr=Od;b.head=ld;b.include=Qb;b.inject=ac;Wb(b,function(){var a={};ma(b,function(c,h){b.prototype[h]||(a[h]=c)});return a}(),!1);b.sample=nb;b.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(c){return nb(c,a)}):nb(this.value())};b.VERSION="3.10.1";fa("bind bindKey curry curryRight partial partialRight".split(" "),
function(a){b[a].placeholder=b});fa(["drop","take"],function(a,c){y.prototype[a]=function(b){var h=this.__filtered__;if(h&&!c)return new y(this);b=null==b?1:T(Ba(b)||0,0);var e=this.clone();h?e.__takeCount__=Z(e.__takeCount__,b):e.__views__.push({size:b,type:a+(0>e.__dir__?"Right":"")});return e};y.prototype[a+"Right"]=function(c){return this.reverse()[a](c).reverse()}});fa(["filter","map","takeWhile"],function(a,c){var b=c+1,h=2!=b;y.prototype[a]=function(a,d){var c=this.clone();c.__iteratees__.push({iteratee:L(a,
d,1),type:b});c.__filtered__=c.__filtered__||h;return c}});fa(["first","last"],function(a,c){var b="take"+(c?"Right":"");y.prototype[a]=function(){return this[b](1).value()[0]}});fa(["initial","rest"],function(a,c){var b="drop"+(c?"":"Right");y.prototype[a]=function(){return this.__filtered__?new y(this):this[b](1)}});fa(["pluck","where"],function(a,c){var b=c?"filter":"map",h=c?Oa:ab;y.prototype[a]=function(a){return this[b](h(a))}});y.prototype.compact=function(){return this.filter(wa)};y.prototype.reject=
function(a,c){a=L(a,c,1);return this.filter(function(c){return!a(c)})};y.prototype.slice=function(a,c){a=null==a?0:+a||0;var b=this;if(b.__filtered__&&(0<a||0>c))return new y(b);0>a?b=b.takeRight(-a):a&&(b=b.drop(a));c!==n&&(c=+c||0,b=0>c?b.dropRight(-c):b.take(c-a));return b};y.prototype.takeRightWhile=function(a,c){return this.reverse().takeWhile(a,c).reverse()};y.prototype.toArray=function(){return this.take(Xa)};ma(y.prototype,function(a,c){var h=/^(?:filter|map|reject)|While$/.test(c),e=/^(?:first|last)$/.test(c),
k=b[e?"take"+("last"==c?"Right":""):c];k&&(b.prototype[c]=function(){var c=e?[1]:arguments,b=this.__chain__,f=this.__wrapped__,m=!!this.__actions__.length,g=f instanceof y,r=c[0],B=g||I(f);B&&h&&"function"==typeof r&&1!=r.length&&(g=B=!1);var t=function(a){return e&&b?k(a,1)[0]:k.apply(n,Ma([a],c))},r={func:Ob,args:[t],thisArg:n},m=g&&!m;return e&&!b?m?(f=f.clone(),f.__actions__.push(r),a.call(f)):k.call(n,this.value())[0]:!e&&B?(f=m?f:new y(this),f=a.apply(f,c),f.__actions__.push(r),new v(f,b)):
this.thru(t)})});fa("join pop push replace shift sort splice split unshift".split(" "),function(a){var c=(/^(?:replace|split)$/.test(a)?qe:Jd)[a],h=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(a);b.prototype[a]=function(){var a=arguments;return e&&!this.__chain__?c.apply(this.value(),a):this[h](function(d){return c.apply(d,a)})}});ma(y.prototype,function(a,c){var h=b[c];if(h){var e=h.name;(lb[e]||(lb[e]=[])).push({name:c,func:h})}});lb[Ib(n,2).name]=[{name:"wrapper",
func:n}];y.prototype.clone=function(){var a=new y(this.__wrapped__);a.__actions__=W(this.__actions__);a.__dir__=this.__dir__;a.__filtered__=this.__filtered__;a.__iteratees__=W(this.__iteratees__);a.__takeCount__=this.__takeCount__;a.__views__=W(this.__views__);return a};y.prototype.reverse=function(){if(this.__filtered__){var a=new y(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a};y.prototype.value=function(){var a,c=this.__wrapped__.value(),b=this.__dir__,h=I(c),
e=0>b,k=h?c.length:0;a=0;for(var m=k,g=this.__views__,r=-1,n=g.length;++r<n;){var B=g[r],t=B.size;switch(B.type){case "drop":a+=t;break;case "dropRight":m-=t;break;case "take":m=Z(m,a+t);break;case "takeRight":a=T(a,m-t)}}g=m;m=g-a;a=e?g:a-1;g=this.__iteratees__;r=g.length;n=0;B=Z(m,this.__takeCount__);if(!h||200>k||k==m&&B==m)return zc(e&&h?c.reverse():c,this.__actions__);h=[];a:for(;m--&&n<B;){a+=b;e=-1;for(k=c[a];++e<r;){var E=g[e],t=E.iteratee,E=E.type,t=t(k);if(2==E)k=t;else if(!t)if(1==E)continue a;
else break a}h[n++]=k}return h};b.prototype.chain=function(){return qd(this)};b.prototype.commit=function(){return new v(this.value(),this.__chain__)};b.prototype.concat=Je;b.prototype.plant=function(a){for(var c,b=this;b instanceof g;){var h=fc(b);c?e.__wrapped__=h:c=h;var e=h,b=b.__wrapped__}e.__wrapped__=a;return c};b.prototype.reverse=function(){var a=this.__wrapped__,c=function(a){return b&&0>b.__dir__?a:a.reverse()};if(a instanceof y){var b=a;this.__actions__.length&&(b=new y(this));b=b.reverse();
b.__actions__.push({func:Ob,args:[c],thisArg:n});return new v(b,this.__chain__)}return this.thru(c)};b.prototype.toString=function(){return this.value()+""};b.prototype.run=b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=function(){return zc(this.__wrapped__,this.__actions__)};b.prototype.collect=b.prototype.map;b.prototype.head=b.prototype.first;b.prototype.select=b.prototype.filter;b.prototype.tail=b.prototype.rest;return b}var n,sb=/\b__p \+= '';/g,B=/\b(__p \+=) '' \+/g,oa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,
V=/&(?:amp|lt|gt|quot|#39|#96);/g,R=/[&<>"'`]/g,Wa=RegExp(V.source),Va=RegExp(R.source),ia=/<%-([\s\S]+?)%>/g,qb=/<%([\s\S]+?)%>/g,Ea=/<%=([\s\S]+?)%>/g,E=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ge=/^\w*$/,he=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Sd=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,X=RegExp(Sd.source),ob=/[\u0300-\u036f\ufe20-\ufe23]/g,ie=/\\(\\)?/g,Cf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ed=/\w*$/,Bf=/^0[xX]/,le=
/^\[object .+?Constructor\]$/,fe=/^\d+$/,me=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,rb=/($^)/,Ef=/['\n\r\u2028\u2029\\]/g,ne=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),oe="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap".split(" "),
Df=-1,P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0;P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Error]"]=P["[object Function]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=
P["[object String]"]=P["[object WeakMap]"]=!1;var O={};O["[object Arguments]"]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Number]"]=O["[object Object]"]=O["[object RegExp]"]=O["[object String]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0;O["[object Error]"]=
O["[object Function]"]=O["[object Map]"]=O["[object Set]"]=O["[object WeakMap]"]=!1;var va={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i",
"\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o","\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},Ka={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},ub={"&amp;":"&","&lt;":"<","&gt;":">",
"&quot;":'"',"&#39;":"'","&#96;":"`"},ea={"function":!0,object:!0},tb={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},La={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},la=ea[typeof b]&&b&&!b.nodeType&&b,ua=ea[typeof y]&&y&&!y.nodeType&&y,dc=ea[typeof self]&&self&&self.Object&&self,ea=ea[typeof window]&&
window&&window.Object&&window,ec=ua&&ua.exports===la&&la,ka=la&&ua&&"object"==typeof g&&g&&g.Object&&g||ea!==(this&&this.window)&&ea||dc||this,ta=H();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ka._=ta,define(function(){return ta})):la&&ua?ec?(ua.exports=ta)._=ta:la._=ta:ka._=ta}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],9:[function(g,y,b){var v,p,z,e,D,w,u,q,A,C,G,x,r,k,t,c,a,h,m,F,
H,n,sb=[].indexOf||function(a){for(var c=0,b=this.length;c<b;c++)if(c in this&&this[c]===a)return c;return-1};v=g("lodash");n=g("./util");G=g("./match");H=g("./substitute");x=function(a){a=n.cloneExpression(a);a=H.doSubRecursive(a,H.subsForPNF.replace_arrow);a=H.doSubRecursive(a,H.subsForPNF.replace_double_arrow);a=c(a);return a=n.exhaust(a,function(a){var c,b,h;b=H.subsForPNF;for(c in b)h=b[c],"replace_arrow"!==c&&"replace_double_arrow"!==c&&(a=H.doSubRecursive(a,h));return a})};b.prenexNormalForm=
x;b.isPNF=function(a){var c,b,h,e,m,g,r,n;a=k(a);c=A(a,"and");a=[];h=0;for(e=c.length;h<e;h++)b=c[h],a.push(A(b,"or"));b=0;for(e=a.length;b<e;b++)for(n=a[b],h=0,m=n.length;h<m;h++)if(c=n[h],"not"!==(g=c.type)&&"sentence_letter"!==g&&"predicate"!==g||"not"===c.type&&"sentence_letter"!==(r=c.left.type)&&"predicate"!==r)return!1;return!0};c=function(a,c){var b,h,e,k,m,g;null==c&&(c="x");k=("\u03b1"===(m=c[0])||"\u03b2"===m||"\u03b3"===m||"\u03c4"===m?"term_metavariable":void 0)||"variable";b=0;h={};
e=function(a){var e;null==h[a.name]&&(b+=1,e=""+c+b,h[a.name]=e);return h[a.name]};g=function(a){if(null!=h[a.name])return delete h[a.name]};return n.walkMutate(a,function(a){if(null===a||null==(null!=a?a.boundVariable:void 0)&&(null==(null!=a?a.type:void 0)||"variable"!==a.type))return a;null!=a.boundVariable&&g(a.boundVariable);null!=(null!=a?a.type:void 0)&&"variable"===a.type&&(a.name=e(a),a.type=k);return a},{topDown:!0})};b.renameVariables=c;b.convertToPNFsimplifyAndSort=function(c){c=x(c);
c=w(c);c=F(c);a(c);return c};b.areExpressionsEquivalent=function(a,c){a=x(a);c=x(c);return z(a,c)};z=function(b,h){var m,g,r;b=w(b);b=F(b);a(b);h=w(h);h=F(h);a(h);g=c(b,"\u03c4");m=k(g);r=k(h);m=G.find(r,m);if(!1===m)return!1;g=G.apply(g,m);return e(g,h)};b.arePNFExpressionsEquivalent=z;F=function(a){var c,b,e,g,n;n=u(a);a=k(a);c=A(a,"and");a=[];e=0;for(g=c.length;e<g;e++)b=c[e],a.push(A(b,"or"));b=0;for(e=a.length;b<e;b++)c=a[b],h(c);m(a);g=[];b=0;for(e=a.length;b<e;b++)c=a[b],g.push(r(c,"or"));
a=r(g,"and");return D(a,n)};b.sortPNFExpression=F;k=function(a){return null!=a.boundVariable?k(a.left):a};b.removeQuantifiers=k;A=function(a,c){var b;if(null!=a.type&&a.type!==c)return[a];if(null!=a.type&&a.type===c)return b=[],b.push.apply(b,A(a.left,c)),b.push.apply(b,A(a.right,c)),b;throw Error("listJuncts called with type = "+c+" and unrecognized expression = "+JSON.stringify(a,null,4));};b.listJuncts=A;h=function(a){return a.sort(n.atomicExpressionComparator)};b.sortJuncts=h;m=function(a){return a.sort(n.listOfAtomicExpressionsComparator)};
b.sortListOfJuncts=m;r=function(a,c){var b,h;if(!a||null==a.length||0===a.length)throw Error("rebuildExpression called with listOfJuncts = "+a);if(1===a.length)return a[0];b=a.shift();h=r(a,c);return{type:c,left:b,right:h}};b.rebuildExpression=r;C=function(a,c){var b;if(null!=a.type&&a.type!==c)return{quantifiedExpression:a};if(null!=a.type&&a.type===c)return b=C(a.left,c),null==b.boundVariables&&(b.boundVariables=[]),b.boundVariables.push(a.boundVariable),b;throw Error("listQuants called with type = "+
c+" and unrecognized expression = "+JSON.stringify(a,null,4));};b.listQuants=C;u=function(a){var c;return null!=a.boundVariable?(c=u(a.left),{type:a.type,symbol:a.symbol,location:a.location,boundVariable:a.boundVariable,left:c,right:null}):null};b.getPrefixedQuantifiers=u;D=function(a,c){if(null===c)return a;null!==c.left?D(a,c.left):c.left=a;return c};b.attachExpressionToQuantifiers=D;e=function(a,c,b){var h;null==b&&(b={quantifierType:null,leftBoundVariables:[],rightBoundVariables:[]});h=(null!=
a?a.type:void 0)||null;if(b.quantifierType!==h){b.leftBoundVariables.sort();b.rightBoundVariables.sort();if(!v.isEqual(b.leftBoundVariables,b.rightBoundVariables))return!1;b.leftBoundVariables=[];b.rightBoundVariables=[];b.quantifierType=h}if(null===a||null==a.boundVariable)return null===c||null==c.boundVariable?!0:!1;if(null===c||null==c.type||c.type!==h)return!1;b.leftBoundVariables.push(a.boundVariable.name);b.rightBoundVariables.push(c.boundVariable.name);return e(a.left,c.left,b)};b.arePrefixedQuantifiersEquivalent=
e;a=function(c,b){var h,e,k,m;void 0===b&&(b=p(c));if(null==(null!=c?c.type:void 0))return c;if("identity"!==c.type)return null!=c.left&&a(c.left,b),null!=c.right&&a(c.right,b),c;h=c.termlist[0];k=c.termlist[1];1===n.termComparator(h,k)&&(e=[k,h],h=e[0],k=e[1]);"variable"===h.type&&"variable"===k.type&&(e=b.indexOf(h.name),m=b.indexOf(k.name),e>m&&(e=[k,h],h=e[0],k=e[1]));c.termlist=[h,k];return c};b.sortIdentityStatements=a;p=function(a,c){var b,h;null==c&&(c={quantifierType:null,thisTypeBoundVariables:[],
allBoundVariables:[]});b=(null!=a?a.type:void 0)||null;c.quantifierType!==b&&(c.thisTypeBoundVariables.sort(),(h=c.allBoundVariables).push.apply(h,c.thisTypeBoundVariables),c.thisTypeBoundVariables=[],c.quantifierType=b);if(null===b||null==a.boundVariable)return c.allBoundVariables;c.thisTypeBoundVariables.push(a.boundVariable.name);return p(a.left,c)};b._getVariableOrder=p;w=function(a){a=n.exhaust(a,function(a){var c,b,h;b=H.subs_eliminate_redundancy;for(c in b)h=b[c],a=H.doSubRecursive(a,h);return F(a)});
return a=t(a)};b.eliminateRedundancyInPNF=w;q=function(a,c){var b;if(null!=c.termlist){var h,e,k,m;k=c.termlist;m=[];h=0;for(e=k.length;h<e;h++)b=k[h],m.push(b.name);if(0<=sb.call(m,a))return!0}return null!=c.boundVariable&&c.boundVariable.name===a?!1:null!=c.left&&q(a,c.left)||null!=c.right&&q(a,c.right)?!0:!1};b.isVariableFree=q;t=function(a){a=n.cloneExpression(a);return n.walkMutate(a,function(a){return null==(null!=a?a.boundVariable:void 0)||q(a.boundVariable.name,a.left)?a:a.left})};b.removeQuantifiersThatBindNothing=
t},{"./match":7,"./substitute":21,"./util":22,lodash:8}],10:[function(g,y,b){(function(v){var p=function(){function b(){this.yy={}}var e=function(a,c,b,h){b=b||{};for(h=a.length;h--;b[a[h]]=c);return b},g=[1,4],p=[1,5],u=[1,6],q=[1,7],A=[1,8],C=[1,9],v=[1,11],x=[1,14],r=[1,15],k=[1,17],t=[1,18],c=[1,16],a=[1,20],h=[1,21],m=[1,22],F=[1,23],H=[1,24],n=[1,25],y=[1,26],B=[1,32],oa=[1,30],V=[1,31],R=[5,10,12,13,14,15,16,17,26,28,33],Wa=[5,10,12,13,14,15,16,17,25,26,28,33],Va=[7,9,10,11,18,19,20,22,29,
30,31,32,34],ia=[5,10,12,13,14,15,16,17,28,33],qb=[5,10,28,33],Ea=[28,33],e={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,box:6,existential_quantifier:7,quantifier_variable:8,"(":9,")":10,universal_quantifier:11,and:12,or:13,nand:14,nor:15,arrow:16,double_arrow:17,not:18,"true":19,"false":20,sentence_letter_or_expression_variable:21,predicate:22,termlist:23,term:24,identity:25,"[":26,substitution_list:27,"]":28,expression_variable:29,sentence_letter:30,variable:31,term_metavariable:32,
",":33,name:34,substitution:35,"null":36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"existential_quantifier",9:"(",10:")",11:"universal_quantifier",12:"and",13:"or",14:"nand",15:"nor",16:"arrow",17:"double_arrow",18:"not",19:"true",20:"false",22:"predicate",25:"identity",26:"[",28:"]",29:"expression_variable",30:"sentence_letter",31:"variable",32:"term_metavariable",33:",",34:"name",36:"null"},productions_:[0,[3,2],[3,2],[3,3],[4,3],[4,5],[4,3],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,
2],[4,1],[4,1],[4,1],[4,4],[4,3],[4,3],[4,4],[21,1],[21,1],[8,1],[8,1],[8,3],[23,1],[23,3],[24,1],[24,1],[24,1],[27,1],[27,3],[35,3],[35,3],[35,3],[35,3],[6,3]],performAction:function(a,c,b,h,e,k,m){a=k.length-1;switch(e){case 1:case 2:return k[a-1];case 3:return k[a-1].box=k[a-2],k[a-1];case 4:this.$={type:"existential_quantifier",symbol:k[a-2],location:m[a-2],boundVariable:k[a-1],left:k[a],right:null};break;case 5:this.$={type:"existential_quantifier",symbol:k[a-3],location:m[a-3],boundVariable:k[a-
2],left:k[a],right:null};break;case 6:this.$={type:"universal_quantifier",symbol:k[a-2],location:m[a-2],boundVariable:k[a-1],left:k[a],right:null};break;case 7:this.$={type:"universal_quantifier",symbol:k[a-3],location:m[a-3],boundVariable:k[a-2],left:k[a],right:null};break;case 8:this.$={type:"and",symbol:k[a-1],location:m[a-1],left:k[a-2],right:k[a]};break;case 9:this.$={type:"or",symbol:k[a-1],location:m[a-1],left:k[a-2],right:k[a]};break;case 10:this.$={type:"nand",symbol:k[a-1],location:m[a-
1],left:k[a-2],right:k[a]};break;case 11:this.$={type:"nor",symbol:k[a-1],location:m[a-1],left:k[a-2],right:k[a]};break;case 12:this.$={type:"arrow",symbol:k[a-1],location:m[a-1],left:k[a-2],right:k[a]};break;case 13:this.$={type:"double_arrow",symbol:k[a-1],location:m[a-1],left:k[a-2],right:k[a]};break;case 14:this.$={type:"not",symbol:k[a-1],location:m[a-1],left:k[a],right:null};break;case 15:this.$={type:"value",symbol:k[a],location:m[a],value:!0,left:null,right:null};break;case 16:this.$={type:"value",
symbol:k[a],location:m[a],value:!1,left:null,right:null};break;case 17:this.$=k[a];break;case 18:this.$={type:"predicate",name:k[a-3],location:m[a-3],termlist:k[a-1]};break;case 19:this.$={type:"identity",symbol:k[a-1],termlist:[k[a-2],k[a]]};break;case 20:case 26:this.$=k[a-1];break;case 21:k[a-3].substitutions=k[a-3].substitutions&&k[a-3].substitutions.length?k[a-3].substitutions.concat(k[a-1]):k[a-1];this.$=k[a-3];break;case 22:this.$={type:"expression_variable",location:m[a],letter:k[a],left:null,
right:null};break;case 23:this.$={type:"sentence_letter",location:m[a],letter:k[a],left:null,right:null};break;case 24:case 30:this.$={type:"variable",name:k[a],location:m[a]};break;case 25:case 31:this.$={type:"term_metavariable",name:k[a],location:m[a]};break;case 27:case 32:this.$=[k[a]];break;case 28:case 33:this.$=[k[a-2]].concat(k[a]);break;case 29:this.$={type:"name",name:k[a],location:m[a]};break;case 34:case 36:this.$={type:"substitution",from:k[a-2],to:k[a],symbol:k[a-1]};break;case 35:case 37:this.$=
{type:"substitution",from:k[a-2],to:null,symbol:k[a-1]};break;case 38:this.$={type:"box",term:k[a-1]}}},table:[{3:1,4:2,6:3,7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,26:[1,13],29:x,30:r,31:k,32:t,34:c},{1:[3]},{5:[1,19],12:a,13:h,14:m,15:F,16:H,17:n,26:y},{4:28,5:[1,27],7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},{8:29,9:B,31:oa,32:V},{4:35,7:[1,33],9:p,11:[1,34],18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},{8:36,9:B,31:oa,32:V},{4:37,7:g,9:p,11:u,18:q,19:A,
20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},e(R,[2,15]),e(R,[2,16]),e(R,[2,17]),{9:[1,38]},{25:[1,39]},{24:40,31:k,32:t,34:c},e(R,[2,22]),e(R,[2,23]),e(Wa,[2,29]),e(Wa,[2,30]),e(Wa,[2,31]),{1:[2,1]},{4:41,7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},{4:42,7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},{4:43,7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},{4:44,7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,
34:c},{4:45,7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},{4:46,7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},{21:50,24:49,27:47,29:x,30:r,31:k,32:t,34:c,35:48},{1:[2,2]},{5:[1,51],12:a,13:h,14:m,15:F,16:H,17:n,26:y},{4:52,7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},e(Va,[2,24]),e(Va,[2,25]),{8:53,9:B,31:oa,32:V},{8:54,9:B,31:oa,32:V},{8:55,9:B,31:oa,32:V},{10:[1,56],12:a,13:h,14:m,15:F,16:H,17:n,26:y},{4:57,7:g,9:p,11:u,
18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},e(ia,[2,14],{26:y}),{23:58,24:59,31:k,32:t,34:c},{24:60,31:k,32:t,34:c},{28:[1,61]},e(ia,[2,8],{26:y}),e(ia,[2,9],{26:y}),e(ia,[2,10],{26:y}),e(ia,[2,11],{26:y}),e(qb,[2,12],{12:a,13:h,14:m,15:F,26:y}),e(qb,[2,13],{12:a,13:h,14:m,15:F,26:y}),{28:[1,62]},{28:[2,32],33:[1,63]},{16:[1,64]},{16:[1,65]},{1:[2,3]},e(ia,[2,4],{26:y}),{10:[1,66]},{4:52,7:g,9:p,10:[1,67],11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},{4:57,7:g,9:p,10:[1,
68],11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},e(R,[2,20]),e(ia,[2,6],{26:y}),{10:[1,69]},{10:[2,27],33:[1,70]},e(R,[2,19]),e([5,7,9,11,18,19,20,22,29,30,31,32,34],[2,38]),e(R,[2,21]),{21:50,24:49,27:71,29:x,30:r,31:k,32:t,34:c,35:48},{24:72,31:k,32:t,34:c,36:[1,73]},{4:74,7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c,36:[1,75]},e(Va,[2,26]),{4:76,7:g,9:p,11:u,18:q,19:A,20:C,21:10,22:v,24:12,29:x,30:r,31:k,32:t,34:c},{4:77,7:g,9:p,11:u,18:q,19:A,20:C,21:10,
22:v,24:12,29:x,30:r,31:k,32:t,34:c},e(R,[2,18]),{23:78,24:59,31:k,32:t,34:c},{28:[2,33]},e(Ea,[2,34]),e(Ea,[2,35]),e(Ea,[2,36],{12:a,13:h,14:m,15:F,16:H,17:n,26:y}),e(Ea,[2,37]),e(ia,[2,5],{26:y}),e(ia,[2,7],{26:y}),{10:[2,28]}],defaultActions:{19:[2,1],27:[2,2],51:[2,3],71:[2,33],78:[2,28]},parseError:function(a,c){if(c.recoverable)this.trace(a);else{var b=function(a,c){this.message=a;this.hash=c};b.prototype=Error;throw new b(a,c);}},parse:function(a){var c=[0],b=[null],h=[],e=this.table,k="",
m=0,g=0,r=0,n=h.slice.call(arguments,1),t=Object.create(this.lexer),F={},q;for(q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,q)&&(F[q]=this.yy[q]);t.setInput(a,F);F.lexer=t;F.parser=this;"undefined"==typeof t.yylloc&&(t.yylloc={});q=t.yylloc;h.push(q);var p=t.options&&t.options.ranges;this.parseError="function"===typeof F.parseError?F.parseError:Object.getPrototypeOf(this).parseError;for(var x,u,H,B,z={},A,v;;){H=c[c.length-1];if(this.defaultActions[H])B=this.defaultActions[H];else{if(null===
x||"undefined"==typeof x)x=void 0,x=t.lex()||1,"number"!==typeof x&&(x=this.symbols_[x]||x);B=e[H]&&e[H][x]}if("undefined"===typeof B||!B.length||!B[0]){var w="";v=[];for(A in e[H])this.terminals_[A]&&2<A&&v.push("'"+this.terminals_[A]+"'");w=t.showPosition?"Parse error on line "+(m+1)+":\n"+t.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[x]||x)+"'":"Parse error on line "+(m+1)+": Unexpected "+(1==x?"end of input":"'"+(this.terminals_[x]||x)+"'");this.parseError(w,{text:t.match,
token:this.terminals_[x]||x,line:t.yylineno,loc:q,expected:v})}if(B[0]instanceof Array&&1<B.length)throw Error("Parse Error: multiple actions possible at state: "+H+", token: "+x);switch(B[0]){case 1:c.push(x);b.push(t.yytext);h.push(t.yylloc);c.push(B[1]);x=null;u?(x=u,u=null):(g=t.yyleng,k=t.yytext,m=t.yylineno,q=t.yylloc,0<r&&r--);break;case 2:v=this.productions_[B[1]][1];z.$=b[b.length-v];z._$={first_line:h[h.length-(v||1)].first_line,last_line:h[h.length-1].last_line,first_column:h[h.length-
(v||1)].first_column,last_column:h[h.length-1].last_column};p&&(z._$.range=[h[h.length-(v||1)].range[0],h[h.length-1].range[1]]);H=this.performAction.apply(z,[k,g,m,F,B[1],b,h].concat(n));if("undefined"!==typeof H)return H;v&&(c=c.slice(0,-2*v),b=b.slice(0,-1*v),h=h.slice(0,-1*v));c.push(this.productions_[B[1]][0]);b.push(z.$);h.push(z._$);B=e[c[c.length-2]][c[c.length-1]];c.push(B);break;case 3:return!0}}}},g=function(){return{EOF:1,parseError:function(a,c){if(this.yy.parser)this.yy.parser.parseError(a,
c);else throw Error(a);},setInput:function(a,c){this.yy=c||this.yy||{};this._input=a;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?
(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var c=a.length,b=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-c);this.offset-=c;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);b.length-1&&(this.yylineno-=b.length-1);var h=
this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?(b.length===a.length?this.yylloc.first_column:0)+a[a.length-b.length].length-b[0].length:this.yylloc.first_column-c};this.options.ranges&&(this.yylloc.range=[h[0],h[0]+this.yyleng-c]);this.yyleng=this.yytext.length;return this},more:function(){this._more=!0;return this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+
(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,
20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),c=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+c+"^"},test_match:function(a,c){var b,h;this.options.backtrack_lexer&&(h={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,
yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(h.yylloc.range=this.yylloc.range.slice(0)));if(b=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=b.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=
a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._backtrack=this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];b=this.performAction.call(this,this.yy,this,c,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(b)return b;if(this._backtrack)for(var e in h)this[e]=h[e];return!1},next:function(){if(this.done)return this.EOF;this._input||
(this.done=!0);var a,c,b;this._more||(this.match=this.yytext="");for(var h=this._currentRules(),e=0;e<h.length;e++)if((c=this._input.match(this.rules[h[e]]))&&(!a||c[0].length>a[0].length))if(a=c,b=e,this.options.backtrack_lexer){a=this.test_match(c,h[e]);if(!1!==a)return a;if(this._backtrack)a=!1;else return!1}else if(!this.options.flex)break;return a?(a=this.test_match(a,h[b]),!1!==a?a:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+
this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){a=
this.conditionStack.length-1-Math.abs(a||0);return 0<=a?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(a,c,b,h){switch(b){case 1:return 9;case 2:return 10;case 3:return 26;case 4:return 28;case 5:return 33;case 6:return 22;case 7:return 19;case 8:return 20;case 9:return 25;case 10:return 12;case 11:return 16;case 12:return 17;case 13:return 13;case 14:return 18;case 15:return 15;
case 16:return 14;case 17:return 11;case 18:return 7;case 19:return 30;case 20:return 34;case 21:return 31;case 22:return 29;case 23:return 32;case 24:return 36;case 25:return 5;case 26:return"invalid_character"}},rules:[/^(?:\s+)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:[A-Z][A-Za-z0-9]*(?=(\()))/,/^(?:[tT][rR][uU][eE])/,/^(?:[fF][aA][lL][sS][eE]|\u22a5|_\|_|[cC][oO][nN][tT][rR][aA][dD][iI][cC][tT][iI][oO][nN]|[cC][oO][nN][tT][rR][aA])/,/^(?:=)/,/^(?:[aA][nN][dD]|&|\u2227|\u2022)/,
/^(?:[aA][rR][rR][oO][wW]|->|\u21d2|\u2192|\u2283)/,/^(?:\u2194|\u2261|\u21d4|double_arrow|<->)/,/^(?:[oO][rR]|\u2228|\+|\u01c0\u01c0|\|)/,/^(?:[nN][oO][tT]|\u00ac|\u02dc|!)/,/^(?:[nN][oO][rR]|\u2193)/,/^(?:[nN][aA][nN][dD]|\u2191)/,/^(?:[aA][lL][lL]|\u2200|[eE][vV][eE][rR][yY])/,/^(?:[sS][oO][mM][eE]|[eE][xX][iI][sS][tT][sS]|\u2203)/,/^(?:[A-Z][0-9]*)/,/^(?:[a-d][0-9]*)/,/^(?:[etxyzw][0-9]*)/,/^(?:[\u03c6\u03c8\u03c7][0-9]*)/,/^(?:[\u03b1\u03b2\u03b3\u03c4][0-9]*)/,/^(?:[nN][uU][lL][lL])/,/^(?:$)/,
/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}}}();e.lexer=g;b.prototype=e;e.Parser=b;return new b}();"undefined"!==typeof g&&"undefined"!==typeof b&&(b.parser=p,b.Parser=p.Parser,b.parse=function(){return p.parse.apply(p,arguments)},b.main=function(p){p[1]||(console.log("Usage: "+p[0]+" FILE"),v.exit(1));p=g("fs").readFileSync(g("path").normalize(p[1]),"utf8");return b.parser.parse(p)},"undefined"!==typeof y&&g.main===
y&&b.main(v.argv.slice(1)))}).call(this,g("_process"))},{_process:3,fs:1,path:2}],11:[function(g,y,b){var v,p,z,e,D,w,u,q,A,C,G,x,r;p=g("lodash");x=g("./justification_parser");D=g("./add_line_numbers").cleanNumber;v=x.parse("premise");b.to=function(b){var g;g={visit:function(c){var a,b;if("line"===c.type&&null==c.justification&&null==c.justificationErrors){b=r(c.content);c.justification=b.justification;if(null!=(null!=(a=c.justification)?a.numbers:void 0)){var e=c.justification,k,g,n,t;n=c.justification.numbers;
t=[];k=0;for(g=n.length;k<g;k++)a=n[k],t.push(D(a));e.numbers=t}c.content=b.rest;c.justificationErrors=b.justificationErrors;c.justificationText=b.justificationText;c.getRuleName=G;c.findLine=u;c.findBlock=w;c.findLineOrBlock=q;c.getCitedLines=C;c.getCitedBlocks=A}}};b.walk(g);g={visit:function(c){"line"===c.type&&null==c.justification&&null==c.justificationErrors&&e(c)&&(c.justification=v)}};b.walk(g);g={visit:function(c){"block"===c.type&&(c.getConclusion=function(){var a;a=p.last(c.content);return"line"===
a.type&&null!=a.sentence?a.sentence:!1},c.getPremises=function(){var a,b;a=p.filter(c.content,function(a){var c,b;return"line"!==a.type||null==a.sentence||"premise"!==(null!=(c=a.justification)?null!=(b=c.rule)?b.connective:void 0:void 0)?!1:!0});return function(){var c,e,k;k=[];c=0;for(e=a.length;c<e;c++)b=a[c],k.push(b.sentence);return k}()})}};b.walk(g);return b};z=/(\/\/)|(\\)|(--)/;r=function(b){var e,c,a;c=b.match(z);if(!c)return{justification:null,rest:b,justificationErrors:null};a=b.slice(0,
c.index);b=b.slice(c.index+2);try{e=x.parse(b)}catch(h){return{justification:null,rest:a,justificationErrors:h.message,justificationText:b}}return{justification:e,rest:a,justificationErrors:null}};e=function(b){var e,c,a,h,m,g;e=b.parent;if(b===e.content[0])return!0;if(null!=e.parent)return!1;m=e.content;g=h=!1;c=0;for(a=m.length;c<a;c++){e=m[c];if("divider"===e.type){g=!0;break}e===b&&(h=!0)}return h&&g?!0:!1};b._isPremise=e;G=function(){return(this.justification.rule.connective+" "+(this.justification.rule.variant.intronation||
"")+" "+(this.justification.rule.variant.side||"")).trim()};u=function(b){return this.findAbove(function(e){if("line"===e.type&&e.number===b)return!0})};w=function(b){return this.findAbove(function(e){if("block"===e.type&&e.number===b)return!0})};q=function(b){return this.findAbove(function(e){if(("block"===e.type||"line"===e.type)&&e.number===b)return!0})};C=function(){var b,e,c,a,h;if(!this.justification.numbers)return[];b=[];a=this.justification.numbers;e=0;for(c=a.length;e<c;e++)h=a[e],h=this.findLine(h),
!1!==h&&b.push(h);return b};A=function(){var b,e,c,a,h;if(!this.justification.numbers)return[];b=[];a=this.justification.numbers;e=0;for(c=a.length;e<c;e++)h=a[e],h=this.findBlock(h),!1!==h&&b.push(h);return b}},{"./add_line_numbers":12,"./justification_parser":18,lodash:8}],12:[function(g,y,b){var v,p,z,e,D,w=[].indexOf||function(b){for(var e=0,g=this.length;e<g;e++)if(e in this&&this[e]===b)return e;return-1};v=g("lodash");z=/^([|\s])*\(?([0-9]\S*)([|\s]*)([\s\S]*)/;p=/\.*\)?$/;e=function(b){return b.replace(p,
"")};b.cleanNumber=e;D=function(b){var g;return(g=b.content.match(z))?(b=g[2],b=e(b),{lineNumber:b,rest:g[4]}):{lineNumber:null,rest:b.content}};b.to=function(b){b.walk({usedLineNumbers:[],lineCounter:0,userNumberedLines:!1,visit:function(b){var e,g;if("block"!==b.type){this.lineCounter+=1;g=D(b);e=g.lineNumber;g=g.rest;if(e||0===e)this.userNumberedLines=!0;null===e&&(e="line"===b.type?""+this.lineCounter:this.lineCounter+"x");if(0<=w.call(this.usedLineNumbers,e))throw Error("Duplicate line number '"+
e+"' used for the second time at line "+this.lineCounter+".  Line numbers must be unique.");this.usedLineNumbers.push(e);b.number=e;b.content=g}}});b.walk({visit:function(e){var g;if("block"===e.type&&(b=e,0!==b.content.length)){e=b.content[0];for(g=v.last(b.content);"block"===g.type;)g=v.last(g.content);null!=e.number&&null!=g.number&&(b.number=e.number+"-"+g.number)}}});return b}},{lodash:8}],13:[function(g,y,b){var v;v=g("../fol");g("../substitute");g("../util");b.to=function(b){b.walk({visit:function(b){if("line"===
b.type&&null==b.sentence&&null==b.sentenceErrors){b.sentenceText=b.content;try{b.sentence=v.parse(b.sentenceText)}catch(e){b.sentenceErrors=e.message}}}});return b}},{"../fol":6,"../substitute":21,"../util":22}],14:[function(g,y,b){var v;g("../fol");g("../substitute");g("../util");b.to=function(b){b.walk({visit:function(b){if(null!=(null!=b?b.type:void 0))switch(b.type){case "block":b.listErrorMessages=function(){throw"Not implemented yet!";};break;default:b.status=new v(b),b.getErrorMessage=function(){return b.status.getMessage()}}}});
return b};v=function(){function b(g){this.line=g;this.messages=[];this.verificationAttempted=this.verified=!1;this.sentenceParsed=null!=this.line.sentence;this.justificationParsed=null!=this.line.justification;null!=this.line.sentenceErrors&&this.addMessage("the sentence you wrote ("+this.line.sentenceText+") is not a sentence of awFOL.");null!=this.line.justificationErrors&&this.addMessage("the justification your supplied ("+this.line.justificationText+") either mentions a rule you can't use here or doesn't make sense.");
"line"===this.line.type&&null==this.line.justification&&null==this.line.justificationErrors&&this.addMessage("you supplied no justification for this line.")}b.prototype.addMessage=function(b){return this.messages.push(b)};b.prototype.clearMessages=function(){return this.messages=[]};b.prototype.popMessage=function(){return 0<this.messages.length?this.messages.pop():""};b.prototype.addAlthoughMessage=function(b){if(null!=this._addedAlthough)return this.addMessage("and although "+b);this.addMessage("although "+
b);return this._addedAlthough=!0};b.prototype.getMessage=function(){var b,e,g,p,u;if(0===this.messages.length)return"";g="This line is "+((this.verified?void 0:"not correct because")||"correct but")+" "+this.messages[0];1<this.messages.length&&(g+="And also "+this.messages[1]);2<this.messages.length&&(g+="Further, "+this.messages[2]);3<this.messages.length&&(g+="And, for another thing, "+this.messages[3]);if(4<this.messages.length)for(p=this.messages.splice(4),b=0,e=p.length;b<e;b++)u=p[b],g+="And "+
u;return g};return b}()},{"../fol":6,"../substitute":21,"../util":22}],15:[function(g,y,b){var v,p,z,e,D,w,u,q,A,C,G,x,r=[].indexOf||function(b){for(var e=0,c=this.length;e<c;e++)if(e in this&&this[e]===b)return e;return-1};v=g("lodash");q=g("./block_parser");D=g("./add_line_numbers");e=g("./add_justification");w=g("./add_sentences");u=g("./add_status");G=g("./fitch_rules").rules;z=function(b){b=q.parse(b);D.to(b);e.to(b);w.to(b);u.to(b);return b};b.to=function(b){return b.walk({visit:function(e){null!=
(null!=e?e.type:void 0)&&(e.verify="block"===e.type?function(){var c;c=!0;e.walk({visit:function(a){"line"===a.type&&(a=a.verify(),c=c&&a)}});return c}:function(){return x(e,b)})}})};x=function(b,e){var c,a,h;v.isString(e)&&(e=z(e));c=e;if(null!=b.type)h=b;else if(h=c.getLine(b),!h)throw Error("Could not find line "+b+" in "+e);h.status.verificationAttempted=!0;if("line"!==h.type)return h.status.verified=!0,h.status.addMessage("(This is a "+h.type.replace(/_/g," ")+")"),!0;if(null!=h.sentenceErrors||
null!=h.justificationErrors||null==h.justification)return h.status.verified=!1;c=p(h);return!0!==c?(h.status.addMessage(c),h.status.verified=!1):a=A(h,a)};b._line=x;p=function(b){var e,c,a,h,m,g,x,n;g=b.justification.numbers;if(!g)return!0;a=0;for(h=g.length;a<h;a++){m=g[a];c=b.findLineOrBlock(m);if(!c)return"something you cited, "+m+", cannot be cited here (either it does not exist, or it is below this line, or else it occurs above but in a closed subproof).";e=[];for(x=b.parent;x;)e.push(x),x=x.parent;
if(0<=r.call(e,c))return"you cannot cite a subproof ("+m+") from within that subproof (you must close it, then cite it).";if("line"!==(n=c.type)&&"block"!==n)return"you cannot cite line "+m+" because it is a "+c.type.replace(/_/g," ")+".";if("line"===c.type&&!0!==c.status.sentenceParsed)return"you cannot cite line "+m+" yet because it does not contain a correct awFOL sentence.";if("block"===c.type){e=c.getFirstLine();c=c.getLastLine();if("block"===c.type)return"you cannot cite "+m+" because it finishes with an unclosed (sub)subproof (you must close it, then cite it)";
if(null==e||null==c||!e.status.sentenceParsed||!c.status.sentenceParsed)return"you cannot cite subproof "+m+" yet because it contains lines that are not correct sentence of awFOL."}}return!0};b._linesCitedAreOk=p;A=function(b,e){var c,a,h,m;c=b.justification.rule.connective;a=b.justification.rule.variant.intronation;m=b.justification.rule.variant.side;h=G[c];if(!h)return b.status.addMessage(("the rule you specified, `"+c+" "+(a||"")+" "+(m||"")+"` does not exist (or, if it does, you are not allowed to use it in this proof).").replace(/\s\s+/g,
"")),b.status.verified=!1;if(!a){if("rule"===h.type)return C(h,b,e);b.status.addMessage("you only partially specified the rule: `"+c+"` needs something extra (intro? elim?).");return b.status.verified=!1}h=h[a];if(!h)return b.status.addMessage("you specified the rule "+c+" *"+a+"* but there is no \u2018"+a+"\u2019 version of the rule for "+c+" (or, if there is, you are not allowed to use it in this proof)."),b.status.verified=!1;if(!m){if("rule"===h.type)return C(h,b,e);if(null!=h.left&&(e=C(h.left,
b,e),!0===e)||null==h.right)return e;c=b.status.popMessage();e=C(h.right,b,e);!1===e&&(h=b.status.popMessage(),null!=c&&null!=h?b.status.addMessage("Either "+c+", or else "+h+"."):b.status.addMessage(c||h||""));return e}return null==h[m]?(b.status.addMessage("you specified the rule "+c+" "+a+" *"+m+"* but there is no \u2018"+m+"\u2019 version of  "+c+" "+a+" (or, if there is, you are not allowed to use it in this proof)."),b.status.verified=!1):C(h[m],b,e)};C=function(b,e,c){return!0===b.check(e)?
e.status.verified=!0:e.status.verified=!1}},{"./add_justification":11,"./add_line_numbers":12,"./add_sentences":13,"./add_status":14,"./block_parser":16,"./fitch_rules":17,lodash:8}],16:[function(g,y,b){var v,p,z,e,D,w,u,q,A,C,G,x,r,k,t=[].indexOf||function(c){for(var a=0,b=this.length;a<b;a++)if(a in this&&this[a]===c)return a;return-1};p=g("lodash");k=g("../util");b.parse=function(c){var a,b,e,k,g,r,x,B;p.isString(c)&&(c=c.split("\n"));if(0===c.length)return new v("");u(c);c=q(c);a=c[0];B=0<=t.call(a.indentation,
"|");for(b=x=new v(a.indentation);0<c.length;)if(k=c.shift(),"line"===k.type||B&&"blank_line"===k.type){for(k.indentation.length>b.indentation.length&&(b=b.newBlock(k.indentation));b&&k.indentation.length<b.indentation.length;)b=b.close();if(!b||k.indentation.length!==b.indentation.length)throw Error("Bad indentation at line "+k.idx+" ("+k.originalText+"). (It is indented to a level to which no earlier line is indented.)");b.newLine(k)}else if("divider"===k.type)b.newLine(k);else if("blank_line"===
k.type&&!B){for(a=[k];0<c.length&&"blank_line"===c[0].type;)a.push(c.shift());if(b===x)for(e=0,g=a.length;e<g;e++)k=a[e],b.newLine(k);else if(e=c[0].indentation,e.length===b.indentation.length){e=b;r=b.close();b=0;for(g=a.length;b<g;b++)k=a[b],r.newLine(k);b=r.newBlock(e.indentation)}else if(e.length>b.indentation.length){r=0;for(g=a.length;r<g;r++)k=a[r],b.newLine(k);b=b.newBlock(e)}else{for(;b&&e.length<b.indentation.length;)b=b.close();if(!b||e.length!==b.indentation.length)throw Error("Bad indentation at line "+
k.idx+" ("+k.originalText+"). (It is indented to a level to which no earlier line is indented.)");g=0;for(e=a.length;g<e;g++)k=a[g],b.newLine(k)}}for(;b!==x;)b=b.close();return b};u=function(c){};q=function(c){var a,b,e,k,g,n,x,p,q;k=w(c);p=[];e=g=0;for(n=c.length;g<n;e=++g)x=c[e],a=r(x,k),b=a.indentation,a=a.content,q="line",A(a)&&(q="blank_line"),C(a)&&(q="divider"),p.push({indentation:b,content:a,idx:e+1,type:q,originalText:x});c=!1;e=[];g=0;for(k=p.length;g<k;g++)b=p[g],e.push(b.indentation);
k=0;for(g=e.length;k<g;k++)if(b=e[k],0<=t.call(b,"|")){c=!0;break}if(c)for(e=0,c=p.length;e<c;e++)b=p[e],b.indentation=b.indentation.replace(/\s+/g,"");return p};z=/^([|\s]+)/;w=function(c){var a,b,e,k,g;if(!c||0===c.length)return!0;b=null!=(e=c[0].match(z))?e[1]:void 0;e=0;for(k=c.length;e<k;e++)if(a=c[e],""!==a.replace(/[|-\s]/g,"")&&(g=a.match(z),a=null!=g?g[1]:void 0,null!==g&&a!==b))return!0;return!1};b.areLinesFormattedIndentationFirst=w;e=/^([|\s]*)([\s\S]*)/;D=/^([|\s]*)(\(?[0-9]+[^|\s]*)?([|\s]*)([\s\S]*)/;
r=function(c,a){var b,k,g,r;if(a)return b=c.match(e),{indentation:b[1],content:b[2]};b=c.match(D);r=b[1]||"";k=b[2];g=b[3]||"";b=b[4]||"";return k?{indentation:g,content:k+" "+b}:{indentation:r,content:""+b}};b.split=r;x=function(c){return c.replace(/[0-9]\S*/,"")};G=function(c){return c.replace(/\|/g,"")};C=function(c){c=x(c);c=G(c);return null!==c.match(/^\s*(--)/)?!0:!1};b._isDivider=C;A=function(c){c=x(c);c=G(c);return""===c.trim()};b._isBlank=A;v=function(){function c(a,c,b){this.indentation=
a;this.parent=c;this.prev=b;this.type="block";this.content=[];this._depth=null==this.parent?1:this.parent._depth+1}c.prototype.getFirstLine=function(){return 0<this.content.length?this.content[0]:null};c.prototype.getLastLine=function(){return 0<this.content.length?p.last(this.content):null};c.prototype.newLine=function(a){a.parent=this;a.prev=this.getLastLine();a.lineNumberInSource=a.idx;a.findAbove=function(a){var c;for(c=this.prev||this.parent;null!=c&&null!=c.parent;){if(a(c))return c;c=null==
c.prev&&null!=c.parent?c.parent:c.prev}return!1};this.content.push(a);return a};c.prototype.newBlock=function(a){a=new c(a,this,this.getLastLine());this.content.push(a);return a};c.prototype.close=function(){return this.parent};c.prototype.walk=function(a){var c,b,e,k,g;g=a.visit(this);if(null!=g)return g;k=this.content;b=0;for(e=k.length;b<e;b++){c=k[b];g=a.visit(c);if(null!=g)return g;"block"===c.type&&(g=c.walk(a));if(null!=g)return g}};c.prototype.getLine=function(a){var c;c=this.walk({onLine:0,
visit:function(c){if("block"!==c.type&&(this.onLine+=1,this.onLine===a))return c}});if(null==c)throw Error("Could not get line number "+a);return c};c.prototype.toString=function(){return JSON.stringify(this,function(a,c){return!c||"prev"!==a&&"parent"!==a?"sentence"===a?k.expressionToString(c):p.isFunction(c)?void 0:c:"[circular reference to "+(null!=c?c.type:void 0)+", depth "+(null!=c?c._depth:void 0)+"]"},4)};return c}();b.Block=v},{"../util":22,lodash:8}],17:[function(g,y,b){g=g("./rule");g=
{_description:"Rules of proof for classical first-order logic.  The rules assume that\nthere is no possible situation with an empty domain.",premise:g.premise(),reit:g.from("\u03c6").to("\u03c6"),and:{elim:{left:g.from("\u03c6 and \u03c8").to("\u03c6"),right:g.from("\u03c6 and \u03c8").to("\u03c8")},intro:g.from("\u03c6").and("\u03c8").to("\u03c6 and \u03c8")},or:{elim:g.from("\u03c6 or \u03c8").and(g.subproof("\u03c6","\u03c7")).and(g.subproof("\u03c8","\u03c7")).to("\u03c7"),intro:{left:g.from("\u03c6").to("\u03c6 or \u03c8"),
right:g.from("\u03c6").to("\u03c8 or \u03c6")}},not:{elim:g.from("not not \u03c6").to("\u03c6"),intro:g.from(g.subproof("\u03c6","contradiction")).to("not \u03c6")},contradiction:{elim:g.from("contradiction").to("\u03c6"),intro:g.from("not \u03c6").and("\u03c6").to("contradiction")},arrow:{elim:g.from("\u03c6 arrow \u03c8").and("\u03c6").to("\u03c8"),intro:g.from(g.subproof("\u03c6","\u03c8")).to("\u03c6 arrow \u03c8")},double_arrow:{elim:{left:g.from("\u03c6\u2194\u03c8").and("\u03c6").to("\u03c8"),
right:g.from("\u03c6\u2194\u03c8").and("\u03c8").to("\u03c6")},intro:g.from(g.subproof("\u03c6","\u03c8")).and(g.subproof("\u03c8","\u03c6")).to("\u03c6\u2194\u03c8")},identity:{intro:g.to("\u03b1=\u03b1"),elim:{left:g.from("\u03b1=\u03b2").and("\u03c6").to("\u03c6[\u03b1->\u03b2]"),right:g.from("\u03b1=\u03b2").and("\u03c6").to("\u03c6[\u03b2->\u03b1]")}},existential:{elim:g.from("exists \u03c4 \u03c6").and(g.subproof("[\u03b1]\u03c6[\u03c4->\u03b1]","\u03c8")).to("\u03c8[\u03b1->null]"),intro:g.from("\u03c6[\u03c4->\u03b1]").to("exists \u03c4 \u03c6")},
universal:{elim:g.from("all \u03c4 \u03c6").to("\u03c6[\u03c4->\u03b1]"),intro:{left:g.from(g.subproof("[\u03b1]","\u03c6")).to("all \u03c4 \u03c6[\u03b1->\u03c4]"),right:g.from(g.subproof("[\u03b1]\u03c6[\u03c4->\u03b1]","\u03c8[\u03c4->\u03b1]")).to("all \u03c4 (\u03c6 arrow \u03c8)")}}};b.rules=g},{"./rule":20}],18:[function(g,y,b){(function(v){var p=function(){function b(){this.yy={}}var e=function(a,c,b,e){b=b||{};for(e=a.length;e--;b[a[e]]=c);return b},g=[1,5],p=[1,10],u=[1,11],q=[1,12],v=[1,
13],y=[1,9],G=[1,14],x=[1,15],r=[5,18],k=[5,8,14,15,16,17,19,20],t=[5,8,16,17,18],c=[5,8,14,15,18],e={trace:function(){},yy:{},symbols_:{error:2,justification:3,j:4,EOF:5,rule_name:6,numberlist:7,connective:8,intronation:9,rule_name_option0:10,rule_name_option1:11,side:12,rule_name_group0:13,elim:14,intro:15,left:16,right:17,number:18,reit:19,premise:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",8:"connective",14:"elim",15:"intro",16:"left",17:"right",18:"number",19:"reit",20:"premise"},productions_:[0,
[3,2],[4,1],[4,2],[4,2],[6,3],[6,3],[6,3],[6,3],[6,3],[6,3],[6,1],[9,1],[9,1],[12,1],[12,1],[7,1],[7,2],[10,0],[10,1],[11,0],[11,1],[13,1],[13,1]],performAction:function(a,c,b,e,k,g,r){a=g.length-1;switch(k){case 1:return g[a-1];case 2:this.$={type:"justification",rule:g[a],location:r[a]};break;case 3:this.$={type:"justification",rule:g[a-1],location:r[a-1],numbers:g[a]};break;case 4:this.$={type:"justification",rule:g[a],location:r[a],numbers:g[a-1]};break;case 5:this.$={type:"rule",connective:g[a-
2],variant:{type:"variant",intronation:g[a-1],side:g[a]}};break;case 6:this.$={type:"rule",connective:g[a-1],variant:{type:"variant",intronation:g[a-2],side:g[a]}};break;case 7:this.$={type:"rule",connective:g[a-1],variant:{type:"variant",intronation:g[a],side:g[a-2]}};break;case 8:this.$={type:"rule",connective:g[a-2],variant:{type:"variant",intronation:g[a],side:g[a-1]}};break;case 9:this.$={type:"rule",connective:g[a],variant:{type:"variant",intronation:g[a-1],side:g[a-2]}};break;case 10:this.$=
{type:"rule",connective:g[a],variant:{type:"variant",intronation:g[a-2],side:g[a-1]}};break;case 11:this.$={type:"rule",connective:g[a],variant:{type:"variant",intronation:null,side:null}};break;case 12:this.$="elim";break;case 13:this.$="intro";break;case 14:this.$="left";break;case 15:this.$="right";break;case 16:this.$=[g[a]];break;case 17:this.$=[g[a-1]].concat(g[a])}},table:[{3:1,4:2,6:3,7:4,8:g,9:6,12:7,13:8,14:p,15:u,16:q,17:v,18:y,19:G,20:x},{1:[3]},{5:[1,16]},{5:[2,2],7:17,18:y},{6:18,8:g,
9:6,12:7,13:8,14:p,15:u,16:q,17:v,19:G,20:x},{9:19,12:20,14:p,15:u,16:q,17:v},{8:[1,21],12:22,16:q,17:v},{8:[1,23],9:24,14:p,15:u},e(r,[2,11]),e(k,[2,16],{7:25,18:y}),e(t,[2,12]),e(t,[2,13]),e(c,[2,14]),e(c,[2,15]),e(r,[2,22]),e(r,[2,23]),{1:[2,1]},{5:[2,3]},{5:[2,4]},e(r,[2,18],{10:26,12:27,16:q,17:v}),{9:28,14:p,15:u},e(r,[2,20],{11:29,12:30,16:q,17:v}),{8:[1,31]},{9:32,14:p,15:u},{8:[1,33]},e(k,[2,17]),e(r,[2,5]),e(r,[2,19]),e(r,[2,8]),e(r,[2,6]),e(r,[2,21]),e(r,[2,10]),e(r,[2,7]),e(r,[2,9])],
defaultActions:{16:[2,1],17:[2,3],18:[2,4]},parseError:function(a,c){if(c.recoverable)this.trace(a);else{var b=function(a,c){this.message=a;this.hash=c};b.prototype=Error;throw new b(a,c);}},parse:function(a){var c=[0],b=[null],e=[],k=this.table,g="",r=0,t=0,x=0,p=e.slice.call(arguments,1),q=Object.create(this.lexer),u={},v;for(v in this.yy)Object.prototype.hasOwnProperty.call(this.yy,v)&&(u[v]=this.yy[v]);q.setInput(a,u);u.lexer=q;u.parser=this;"undefined"==typeof q.yylloc&&(q.yylloc={});v=q.yylloc;
e.push(v);var y=q.options&&q.options.ranges;this.parseError="function"===typeof u.parseError?u.parseError:Object.getPrototypeOf(this).parseError;for(var w,A,C,z,G={},D,X;;){C=c[c.length-1];if(this.defaultActions[C])z=this.defaultActions[C];else{if(null===w||"undefined"==typeof w)w=void 0,w=q.lex()||1,"number"!==typeof w&&(w=this.symbols_[w]||w);z=k[C]&&k[C][w]}if("undefined"===typeof z||!z.length||!z[0]){var ob="";X=[];for(D in k[C])this.terminals_[D]&&2<D&&X.push("'"+this.terminals_[D]+"'");ob=q.showPosition?
"Parse error on line "+(r+1)+":\n"+q.showPosition()+"\nExpecting "+X.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(r+1)+": Unexpected "+(1==w?"end of input":"'"+(this.terminals_[w]||w)+"'");this.parseError(ob,{text:q.match,token:this.terminals_[w]||w,line:q.yylineno,loc:v,expected:X})}if(z[0]instanceof Array&&1<z.length)throw Error("Parse Error: multiple actions possible at state: "+C+", token: "+w);switch(z[0]){case 1:c.push(w);b.push(q.yytext);e.push(q.yylloc);c.push(z[1]);
w=null;A?(w=A,A=null):(t=q.yyleng,g=q.yytext,r=q.yylineno,v=q.yylloc,0<x&&x--);break;case 2:X=this.productions_[z[1]][1];G.$=b[b.length-X];G._$={first_line:e[e.length-(X||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(X||1)].first_column,last_column:e[e.length-1].last_column};y&&(G._$.range=[e[e.length-(X||1)].range[0],e[e.length-1].range[1]]);C=this.performAction.apply(G,[g,t,r,u,z[1],b,e].concat(p));if("undefined"!==typeof C)return C;X&&(c=c.slice(0,-2*X),b=b.slice(0,
-1*X),e=e.slice(0,-1*X));c.push(this.productions_[z[1]][0]);b.push(G.$);e.push(G._$);z=k[c[c.length-2]][c[c.length-1]];c.push(z);break;case 3:return!0}}}},g=function(){return{EOF:1,parseError:function(a,c){if(this.yy.parser)this.yy.parser.parseError(a,c);else throw Error(a);},setInput:function(a,c){this.yy=c||this.yy||{};this._input=a;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,
first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var c=a.length,b=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=
this.yytext.substr(0,this.yytext.length-c);this.offset-=c;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);b.length-1&&(this.yylineno-=b.length-1);var e=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?(b.length===a.length?this.yylloc.first_column:0)+a[a.length-b.length].length-b[0].length:this.yylloc.first_column-
c};this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-c]);this.yyleng=this.yytext.length;return this},more:function(){this._more=!0;return this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},
less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),c=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+c+"^"},test_match:function(a,c){var b,
e;this.options.backtrack_lexer&&(e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(e.yylloc.range=this.yylloc.range.slice(0)));if(b=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=
b.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._backtrack=this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];b=this.performAction.call(this,
this.yy,this,c,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(b)return b;if(this._backtrack)for(var k in e)this[k]=e[k];return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,c,b;this._more||(this.match=this.yytext="");for(var e=this._currentRules(),k=0;k<e.length;k++)if((c=this._input.match(this.rules[e[k]]))&&(!a||c[0].length>a[0].length))if(a=c,b=k,this.options.backtrack_lexer){a=this.test_match(c,e[k]);if(!1!==a)return a;
if(this._backtrack)a=!1;else return!1}else if(!this.options.flex)break;return a?(a=this.test_match(a,e[b]),!1!==a?a:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},
_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){a=this.conditionStack.length-1-Math.abs(a||0);return 0<=a?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(a,c,b,e){switch(b){case 0:return c.yytext=
a.lexer.matches[1],18;case 1:return c.yytext=a.lexer.matches[1]+"-"+a.lexer.matches[2],18;case 2:return c.yytext=a.lexer.matches[1]+"-"+a.lexer.matches[2],18;case 3:return c.yytext=a.lexer.matches[1],18;case 4:return 14;case 5:return 15;case 6:return c.yytext="contradiction",8;case 7:return c.yytext="or",8;case 8:return c.yytext="identity",8;case 9:return c.yytext="and",8;case 10:return c.yytext="double_arrow",8;case 11:return c.yytext="arrow",8;case 12:return c.yytext="not",8;case 13:return c.yytext=
"reit",19;case 14:return c.yytext="premise",20;case 15:return c.yytext="universal",8;case 16:return c.yytext="existential",8;case 17:return 16;case 18:return 17;case 20:return 5;case 23:console.log(c.yytext)}},rules:[/^(?:([0-9][^,\s]*)(\s+and\s+)(?=[0-9]))/i,/^(?:([0-9][^,\s]*)\s+to\s+([0-9][^,\s]*))/i,/^(?:([0-9][^,\s]*?)\s*(?:-+)\s*([0-9][^,\s]*))/i,/^(?:([0-9][^,\s]*)(?:(\s*,)*))/i,/^(?:elimination|eliminate|elim)/i,/^(?:introduction|introduce|intro)/i,/^(?:\u22a5|_\|_|contradiction|contra|false)/i,
/^(?:or|\u2228|\+|\u01c0\u01c0|\|)/i,/^(?:=|identity)/i,/^(?:and|conjunction|\u2227|\u2022)/i,/^(?:double_arrow|\u2194|\u2261|\u21d4|<->)/i,/^(?:arrow|->|\u21d2|\u2192|\u2283)/i,/^(?:not|\u00ac|\u02dc|!|negation)/i,/^(?:reit|reiteration)/i,/^(?:premise|assumption)/i,/^(?:all|\u2200|every|universal)/i,/^(?:some|exists|\u2203|existential)/i,/^(?:left)/i,/^(?:right)/i,/^(?:[\s,]+)/i,/^(?:$)/i,/^(?:\w+)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,
19,20,21,22,23],inclusive:!0}}}}();e.lexer=g;b.prototype=e;e.Parser=b;return new b}();"undefined"!==typeof g&&"undefined"!==typeof b&&(b.parser=p,b.Parser=p.Parser,b.parse=function(){return p.parse.apply(p,arguments)},b.main=function(p){p[1]||(console.log("Usage: "+p[0]+" FILE"),v.exit(1));p=g("fs").readFileSync(g("path").normalize(p[1]),"utf8");return b.parser.parse(p)},"undefined"!==typeof y&&g.main===y&&b.main(v.argv.slice(1)))}).call(this,g("_process"))},{_process:3,fs:1,path:2}],19:[function(g,
y,b){var v,p,z,e,D,w;w=g("./block_parser");p=g("./add_line_numbers");v=g("./add_justification");z=g("./add_sentences");e=g("./add_status");D=g("./add_verification");b.parse=function(b){var g,y;try{g=w.parse(b),p.to(g),v.to(g),z.to(g),e.to(g),D.to(g)}catch(C){return C.message}y=g;y.listErrorMessages=function(){var b;b=[];y.walk({visit:function(e){var g;if("line"===(null!=e?e.type:void 0)&&!1===e.status.verified)return g=e.number,e=e.status.getMessage(),b.push(g+": "+e)}});return b.join("\n")};return y}},
{"./add_justification":11,"./add_line_numbers":12,"./add_sentences":13,"./add_status":14,"./add_verification":15,"./block_parser":16}],20:[function(g,y,b){var v,p,z,e,D,w,u,q,A,C,G=[].indexOf||function(b){for(var e=0,k=this.length;e<k;e++)if(e in this&&this[e]===b)return e;return-1};e=g("lodash");g("../util");q=g("../fol");D=function(){function b(e){e=w(e);this._requirements={from:(e?[e]:void 0)||[],to:void 0}}b.prototype.type="rule";b.prototype.and=function(b){b=w(b);this._requirements.from.push(b);
return this};b.prototype.to=function(b){if(this._requirements.to)throw Error("You cannot specify `.to` more than once in a single rule.");b=w(b);this._requirements.to=b;return this};b.prototype.check=function(b){return(new v(b,this._requirements)).check()};return b}();A=function(b){return new D(b)};b.from=A;b.to=function(b){return A().to(b)};b.subproof=function(b,g){b=w(b);g=w(g);return{type:"subproof",startReq:b,endReq:g,listMetaVariableNames:function(){var b;b=this.startReq.listMetaVariableNames();
return b=e.defaults(b,this.endReq.listMetaVariableNames())},toString:function(){return b.toString()+" \u22a2 "+g.toString()}}};b.premise=function(){var b,e;e=A();b=e.check.bind(e);e.check=function(e){var g;g=b(e);return!0!==g?g:e.prev?null!=e.parent.parent?(e.status.addMessage("only the first line of a subproof may be a premise."),!1):e.findAbove(function(c){var a,b;if("line"===c.type){if(b="premise"===(null!=(a=c.justification)?a.rule.connective:void 0))return!1;if(!b)return!0}return"block"===c.type?
!0:!1})?(e.status.addMessage("premises may not occur after non-premises."),!1):!0:!0};return e};b._notImplementedYet=function(b){throw Error("the rule `"+b.justification.rule.connective+"` (or some part of it) is not implemented yet!");};w=function(b){if(!b||"subproof"===b.type)return b;e.isString(b)&&(b=q.parse(b));q._decorate(b);return b};u=function(b){var g,k,t,c,a,h,m,p;if(0===b.length)return[[]];p=[];k=c=0;for(a=b.length-1;0<=a?c<=a:c>=a;k=0<=a?++c:--c)for(g=e.clone(b),k=g.splice(k,1),m=u(g),
t=g=0,h=m.length-1;0<=h?g<=h:g>=h;t=0<=h?++g:--g)t=k.concat(m[t]),p.push(t);return p};b._permutations=u;v=function(){function b(e,g){this.line=e;this.requirements=g;this.citedLines=this.line.getCitedLines();this.citedBlocks=this.line.getCitedBlocks();this.ruleName=this.line.getRuleName();this.matches=null}b.prototype.check=function(){var b,e,g,c,a;if(!this.citedTypesAreCorrect())return this;a=[];this.requirements.to&&a.push(new z(this.requirements.to,[this.line]));c=this.requirements.from;e=0;for(g=
c.length;e<g;e++)b=c[e],null!=(null!=b?b.type:void 0)&&"subproof"===b.type?a.push(new z(b,this.citedBlocks)):a.push(new z(b,this.citedLines));a.reverse();b=u(a);for(e=!1;!e&&0<b.length;)e=b.shift(),e=new p(e,this.line),e=e.find();return e?!0:this};b.prototype.citedTypesAreCorrect=function(){var b,e,g,c,a;g=this.whatToCite();b=this.citedLines.length;e=this.citedBlocks.length;if(g.lines===b&&g.subproofs===e)return!0;a=C(g.lines,"line");c=C(g.subproofs,"subproof");g=(a&&c?"and ":void 0)||(a||c?void 0:
"nothing")||"";b=C(b,"line");e=C(e,"subproof");this.line.status.addMessage(("you must cite "+a+" "+g+c+" when using the rule "+this.ruleName+" (you cited "+b+" "+((b&&e?"and ":void 0)||(b||e?void 0:"nothing")||"")+e+").").replace(/\s\s+/g," "));return!1};b.prototype.whatToCite=function(){var b,e,g,c,a;a={lines:0,subproofs:0};c=this.requirements.from;b=0;for(e=c.length;b<e;b++)g=c[b],"subproof"===g.type?a.subproofs+=1:a.lines+=1;return a};return b}();z=function(){function b(e,g,t){this.theRequirement=
e;this.candidateLinesOrSubproofs=g;this.matches=null!=t?t:{};this.saveMatches(this.matches);this.metaVariableNames=this.theRequirement.listMetaVariableNames()}b.prototype.setMatches=function(b){this.matches=b;return this.saveMatches(this.matches)};b.prototype._matchesStack=[];b.prototype.saveMatches=function(){var b;b=e.cloneDeep(this.matches);this._matchesStack.push(b);this.matches=b};b.prototype.restoreMatches=function(){var b;this._matchesStack.pop();b=this._matchesStack;this.matches=b[b.length-
1]};b.prototype.tempRemovedCandidates={};b.prototype.temporarilyRemoveCandidate=function(b){var e,g;e=function(){var c,a,e,k;e=this.candidateLinesOrSubproofs;k=[];c=0;for(a=e.length;c<a;c++)g=e[c],g.number===b&&k.push(g);return k}.call(this);if(1===e.length)return this.tempRemovedCandidates[b]=e[0],this.candidateLinesOrSubproofs=function(){var c,a,e,k;e=this.candidateLinesOrSubproofs;k=[];c=0;for(a=e.length;c<a;c++)g=e[c],g.number!==b&&k.push(g);return k}.call(this)};b.prototype.restoreCandidate=
function(b){if(b in this.tempRemovedCandidates)return this.candidateLinesOrSubproofs.push(this.tempRemovedCandidates[b]),delete this.tempRemovedCandidates[b]};b.prototype.canCheckAlready=function(){var b,e,g,c;g=this.metaVariableNames.inSub.left;b=0;for(e=g.length;b<e;b++)if(c=g[b],!(c in this.matches))return!1;return!0};b.prototype.check=function(){var b,e,g,c,a,h;h=!1;a=this.candidateLinesOrSubproofs;e=0;for(g=a.length;e<g;e++)b=a[e],c=this._checkOne(b),!1!==c&&(h=h||{},h[b.number]=c);return h};
b.prototype._checkOne=function(b){var e;if(null!=this.theRequirement.type&&"subproof"===this.theRequirement.type){if("block"!==b.type)return!1;e=this._checkOneLine(this.theRequirement.startReq,b.getFirstLine(),this.matches);return!1===e?!1:b=this._checkOneLine(this.theRequirement.endReq,b.getLastLine(),e)}return"block"===b.type?!1:e=this._checkOneLine(this.theRequirement,b,this.matches)};b.prototype._checkOneLine=function(b,e,g){var c,a;b=b.clone().applyMatches(g);if(null===b.applySubstitutions())return!1;
c=e.sentence;if(null==c)return!1;null==b.box&&null!=c.box&&(c=c.clone(),delete c.box);g=c.findMatches(b,g);if(!1===g)return g;if(null!=b.box||"box"===b.type)b=("box"===b.type?b:void 0)||(null!=b.box?b.box:void 0),b=b.applyMatches(g).applySubstitutions(),a=b.term.name,b=function(c){return"line"!==c.type?!1:0<=G.call(c.sentence.getNames(),a)?!0:!1},(e=e.findAbove(b))&&(g=!1);return g};return b}();p=function(){function b(e,g,p){this.line=g;this.matches=null!=p?p:{};var c,a;a=[];p=0;for(c=e.length;p<
c;p++)g=e[p],a.push(g);this.reqCheckList=a;this.line.status.clearMessages()}b.prototype.find=function(){var e,g,p,c,a,h,m;if(0===this.reqCheckList.length)return!0;a=this.reqCheckList.pop();a.setMatches(this.matches);for(h=0;!a.canCheckAlready()&&h<this.reqCheckList.length+1;)this.reqCheckList.unshift(a),a=this.reqCheckList.pop(),a.setMatches(this.matches),h+=1;if(h===this.reqCheckList.length+1)throw Error("Rule problem!  I can\u2019t start checking any of the conditions in the rule.");h=a.check();
if(!1===h)return this.writeMessage(a),!1;for(c in h){e=h[c];m=this.reqCheckList;g=0;for(p=m.length;g<p;g++)a=m[g],a.temporarilyRemoveCandidate(c);a=new b(this.reqCheckList,this.line,e);m=a.find();p=this.reqCheckList;g=0;for(e=p.length;g<e;g++)a=p[g],a.restoreCandidate(c);if(!0===m)return!0}return!1};b.prototype.writeMessage=function(b){var e;if(this.line.number===(null!=(e=b.candidateLinesOrSubproofs[0])?e.number:void 0))return this.line.status.addMessage("You can only use "+this.line.getRuleName()+
" on a line with the form \u2018"+b.theRequirement.toString()+"\u2019.");e=b.theRequirement.type;"subproof"!==e&&(e="line");return this.line.status.addMessage("to apply "+this.line.getRuleName()+" you need to cite a "+e+" with the form \u2018"+b.theRequirement.toString()+"\u2019.")};return b}();C=function(b,e){if(0===b)return"";if(1===b)return"1 "+e;if(1<b)return b+" "+e+"s"};b.RequirementChecker=z;b.Pathfinder=p;b.LineChecker=v},{"../fol":6,"../util":22,lodash:8}],21:[function(g,y,b){var v,p,z,e,
D,w,u,q,A;v=g("lodash");A=g("./util");y=g("./parser/awFOL");D=g("./match");p={replace_arrow:{from:"\u03c6 arrow \u03c8",to:"(not \u03c6) or \u03c8"},replace_double_arrow:{from:"\u03c6 \u2194 \u03c8",to:"(\u03c6 or (not \u03c8)) and ((not \u03c6) or \u03c8)"},demorgan1:{from:"not (\u03c6 and \u03c8)",to:"((not \u03c6) or (not \u03c8))"},demorgan2:{from:"not (\u03c6 or \u03c8)",to:"((not \u03c6) and (not \u03c8))"},dbl_neg:{from:"not not \u03c6",to:"\u03c6"},not_all:{from:"not ((all \u03c4) \u03c6)",
to:"(exists \u03c4) (not \u03c6)"},not_exists:{from:"not ((exists \u03c4) \u03c6)",to:"(all \u03c4) (not \u03c6)"},cnf_left:{from:"\u03c61 or (\u03c62 and \u03c63)",to:"(\u03c61 or \u03c62) and (\u03c61 or \u03c63)"},cnf_right:{from:"(\u03c62 and \u03c63) or \u03c61",to:"(\u03c62 or \u03c61) and (\u03c63 or \u03c61)"},all_and_left:{from:"\u03c6 and ((all \u03c4) \u03c8)",to:"(all \u03c4) (\u03c6 and \u03c8)"},all_and_right:{from:"((all \u03c4) \u03c8) and \u03c6",to:"(all \u03c4) (\u03c8 and \u03c6)"},
all_or_left:{from:"\u03c6 or ((all \u03c4) \u03c8)",to:"(all \u03c4) (\u03c6 or \u03c8)"},all_or_right:{from:"((all \u03c4) \u03c8) or \u03c6",to:"(all \u03c4) (\u03c8 or \u03c6)"},exists_and_left:{from:"\u03c6 and ((exists \u03c4) \u03c8)",to:"(exists \u03c4) (\u03c6 and \u03c8)"},exists_and_right:{from:"((exists \u03c4) \u03c8) and \u03c6",to:"(exists \u03c4) (\u03c8 and \u03c6)"},exists_or_left:{from:"\u03c6 or ((exists \u03c4) \u03c8)",to:"(exists \u03c4) (\u03c6 or \u03c8)"},exists_or_right:{from:"((exists \u03c4) \u03c8) or \u03c6",
to:"(exists \u03c4) (\u03c8 or \u03c6)"}};u={};for(e in p)q=p[e],g=y.parse(q.from),A.delExtraneousProperties(g),q=y.parse(q.to),A.delExtraneousProperties(q),g={from:g,to:q},u[e]=g;b.subsForPNF=u;p={identity:{from:"\u03c4=\u03c4",to:"true"},not_true:{from:"not true",to:"false"},not_false:{from:"not false",to:"true"},or_duplicate:{from:"\u03c6 or \u03c6",to:"\u03c6"},or_duplicate_left:{from:"\u03c6 or (\u03c6 or \u03c8)",to:"\u03c6 or \u03c8"},or_duplicate_right:{from:"(\u03c8 or \u03c6) or \u03c6",
to:"\u03c8 or \u03c6"},and_duplicate:{from:"\u03c6 and \u03c6",to:"\u03c6"},and_duplicate_left:{from:"\u03c6 and (\u03c6 and \u03c8)",to:"\u03c6 and \u03c8"},and_duplicate_right:{from:"(\u03c8 and \u03c6) and \u03c6",to:"\u03c8 and \u03c6"},false_or:{from:"false or \u03c6",to:"\u03c6"},true_or:{from:"true or \u03c6",to:"true"},false_and:{from:"false and \u03c6",to:"false"},true_and:{from:"true and \u03c6",to:"\u03c6"},contradiction_and:{from:"\u03c6 and not \u03c6",to:"false"},contradiction_and_left:{from:"\u03c6 and (not \u03c6 and \u03c8)",
to:"false"},contradiction_and_right:{from:"(\u03c8 and \u03c6) and not \u03c6",to:"false"},taut_or:{from:"\u03c6 or not \u03c6",to:"true"},taut_and_left:{from:"\u03c6 or (not \u03c6 or \u03c8)",to:"true"},taut_and_right:{from:"(\u03c8 or \u03c6) or not \u03c6",to:"true"}};u={};for(e in p)q=p[e],g=y.parse(q.from),A.delExtraneousProperties(g),q=y.parse(q.to),A.delExtraneousProperties(q),g={from:g,to:q},u[e]=g;b.subs_eliminate_redundancy=u;z=function(b,e){var g;return(g=D.findWithoutApplyingSubs(b,e.from))?
D.apply(e.to,g):b};b.doSub=z;b.doSubRecursive=function(b,e,g){null==g&&(g={});return A.walkMutate(b,function(b){return null===b||v.isArray(b)||null!=b.type&&"box"===b.type?b:z(b,e)})};w=function(b,e,g){var p,k,q;null==g&&(g={});p=e.from;k=e.to;q=function(b){if(null===b||v.isArray(b)||q._inSub)return b;if(A.areIdenticalExpressions(b,p)){if(null===k)throw Error("_internal: replace to null");return A.cloneExpression(k)}return b};b=g.noClone?b:A.cloneExpression(b);return A.walkMutate(b,q)};b.replace=
w;b.applySubstitutions=function(b){var e;e=function(b){var e,g,p,c;if(null==(null!=b?b.substitutions:void 0))return b;c=v.cloneDeep(b.substitutions);delete b.substitutions;e=0;for(g=c.length;e<g;e++)p=c[e],p={from:p.from,to:p.to},b=w(b,p);return b};b=v.cloneDeep(b);try{return A.walkMutate(b,e)}catch(g){b=g;if("_internal: replace to null"===b.message)return null;throw b;}}},{"./match":7,"./parser/awFOL":10,"./util":22,lodash:8}],22:[function(g,y,b){var v,p,z,e,D,w,u,q,A,C,G,x,r,k,t={}.hasOwnProperty;
p=g("lodash");k=function(b,a,e){var g;if(p.isArray(b)){var q,r,n;n=[];q=0;for(r=b.length;q<r;q++)g=b[q],n.push(k(g,a,e));return n}if(null===b)return a(b);null!=(null!=e?e.topDown:void 0)&&e.topDown&&(g=a(b));a._trace&&console.log("walkMutate got "+util.expressionToString(b));null!=b.box&&(a._inBox=!0,b.box=k(b.box,a,e),a._inBox=void 0);null!=b.substitutions&&(null==a._inSubCount&&(a._inSubCount=0),a._inSubCount+=1,a._inSub=!0,b.substitutions=k(b.substitutions,a,e),--a._inSubCount,0===a._inSubCount&&
(a._inSub=void 0));"substitution"===b.type&&(a._inSubLeft=!0,b.from=k(b.from,a,e),a._inSubLeft=void 0,b.to=k(b.to,a,e));null!=b.boundVariable&&(a._inBoundVariable=!0,b.boundVariable=k(b.boundVariable,a,e),a._inBoundVariable=void 0);null!=b.termlist&&(b.termlist=k(b.termlist,a,e));null!=b.term&&(b.term=k(b.term,a,e));null!=b.left&&(b.left=k(b.left,a,e));null!=b.right&&(b.right=k(b.right,a,e));return null!=(null!=e?e.topDown:void 0)&&e.topDown?g:a(b)};b.walkMutate=k;x=function(b,a,e){var g;g=function(b){var c,
e;for(c in g)t.call(g,c)&&(e=g[c],a[c]=e);a(b);return b};return k(b,g,e)};b.walk=x;r=function(b,a,e,g){var k,q,n;if(e&&(g=e(b,a),void 0!==g))return g;if(null===b||null===a)return b===a;q=[p.isBoolean,p.isNumber,p.isString];g=0;for(k=q.length;g<k;g++)if(n=q[g],n(b)||n(a))return b===a;if(p.isArray(b)||p.isArray(a)){if(!p.isArray(b)||!p.isArray(a)||b.length!==a.length)return!1;k=q=0;for(n=b.length;q<n;k=++q)if(g=b[k],!r(g,a[k],e))return!1;return!0}n="substitutions from to box term boundVariable termlist left right type name letter value".split(" ");
k=0;for(q=n.length;k<q;k++)if(g=n[k],(g in b||g in a)&&!(g in b&&g in a&&r(b[g],a[g],e)))return!1;return!0};b.walkCompare=r;D=function(b,a,e){return r(b,a,void 0,e)};b.areIdenticalExpressions=D;A=function(b,a){var e,g,k,q;e=a(b);if(void 0!==e)return e;if(null!==b){k=[p.isBoolean,p.isNumber,p.isString];e=0;for(g=k.length;e<g;e++)if(q=k[e],q(b))return;if(p.isArray(b))for(g=0,k=b.length;g<k;g++){if(e=b[g],e=A(e,a),void 0!==e)return e}else for(q="substitutions from to box term boundVariable termlist left right type name letter value".split(" "),
g=0,k=q.length;g<k;g++)if(e=q[g],e in b&&(e=A(b[e],a),void 0!==e))return e}};b.find=A;b.walkMutateFindOne=function(b,a,e){var g,p;g=void 0;p=function(b){var c,e;if(void 0!==g)return b;for(c in p)t.call(p,c)&&(e=p[c],a[c]=e);e=a(b)||{};c=e.newExpression;g=e.aResult;return void 0!==c?c:b};b=k(b,p,e);return{theResult:g,mutatedExpression:b}};z=function(b){var a,e,g,k;if(null===b)return b;k=["location","symbol","parent"];e=0;for(g=k.length;e<g;e++)a=k[e],a in b&&delete b[a];for(a in b)t.call(b,a)&&(e=
b[a],p.isFunction(e)&&delete b[a]);return b};b.delExtraneousProperties=function(b){return null==(null!=b?b.type:void 0)?b:x(b,z)};u=function(b){var a,e,g,k,q;if(null===b)return null;g=[p.isBoolean,p.isNumber,p.isString];a=0;for(e=g.length;a<e;a++)if(k=g[a],k(b))return b;if(p.isArray(b)){k=[];e=0;for(g=b.length;e<g;e++)a=b[e],k.push(u(a));return k}a={};q="substitutions from to box term boundVariable termlist left right type name letter value".split(" ");g=0;for(k=q.length;g<k;g++)e=q[g],e in b&&(a[e]=
u(b[e]));return a};b.cloneExpression=u;v={not:"\u00ac","false":"\u22a5",identity:"=",and:"\u2227",arrow:"\u2192",double_arrow:"\u2194",or:"\u2228",nor:"\u2193",nand:"\u2191",universal_quantifier:"\u2200",existential_quantifier:"\u2203"};q=function(b,a){var e,g,q,r,n,t;null==a&&(a={});r=[p.isBoolean,p.isNumber,p.isString,p.isArray];e=0;for(g=r.length;e<g;e++)if(t=r[e],t(b))return""+b;n=0;e=a.replaceSymbols?u(b):p.cloneDeep(b);g=k(e,function(b){var c,e,g,h,k,m,q,r;if(null===b)return"null";n+=1;m=[p.isBoolean,
p.isNumber,p.isString];e=0;for(h=m.length;e<h;e++)if(t=m[e],t(b))return""+b;if(p.isArray(b))return b.join(",");if(null==(null!=b?b.type:void 0)&&void 0===b)return"[undefined]";if("variable"===(q=null!=b?b.type:void 0)||"name"===q||"term_metavariable"===q)return b.substitutions?"{"+b.name+"["+b.substitutions+"]}":b.name;if("box"===b.type)return"["+b.term+"]";if("termlist"===b.type){g=[];r=0;for(k=b.length;r<k;r++)c=b[r],g.push(c.name);return g}if("substitution"===b.type)return b.from+"->"+b.to;null!=
b.box&&(c=b.box);b.substitutions&&(r="["+b.substitutions+"]");null!=b.termlist&&(e=b.name||b.symbol||v[b.type]||b.type,k=e+"("+b.termlist.join(",")+")");"identity"===b.type&&(e=b.symbol||"=",h=b.termlist,k=h[0],h=h[1],k=k+" "+e+" "+h);if("sentence_letter"===(g=b.type)||"expression_variable"===g)k=b.letter;"value"===b.type&&(k=""+((null!=b.symbol?b.symbol:void 0)||("false"===b.value||!1===b.value?"\u22a5":void 0)||b.value));e=null!=b.right;h=g=" ";e&&(g=" (",h=" )");e=b.symbol||v[b.type]||b.type||
"";a.wrapWithDivs&&(e="<span class='_symbolWrap' data-symbolNum='"+n+"'>"+e+"</span>");null!=b.boundVariable&&(k=b.boundVariable,k=e+" "+k+" "+g+b.left+(b.right||"")+h);null!=b.left&&null==b.boundVariable&&(k=null==b.right?""+g+e+" "+(b.left||"")+h:""+g+(b.left||"")+" "+e+" "+(b.right||"")+h);a.wrapWithDivs&&(k="<span class='_expressionWrap'>"+k+"</span>");return""+(c||"")+k+(r||"")});e={remove_extra_whitespace:{from:/\s+/g,to:" "},remove_quantifier_space:{from:/([\u2200\u2203])\s+/g,to:"$1"},remove_outer_brackets:{from:/(^\s*\()([\s\S]*)(\)\s*$)/,
to:"$2"}};for(q in e)r=e[q],g=g.replace(r.from,r.to);return g.trim()};b.expressionToString=q;b.matchesToString=function(b){var a,e,g;if(!1===b)return"false";if(!b)return"[no]";a="";for(e in b)t.call(b,e)&&(g=b[e],null!=(null!=g?g.type:void 0)&&(a=a+"\n\t"+e+" : "+q(g)));return a};b.exhaust=function(b,a,e){var g;null==e&&(e=D);for(g=null;!e(g,b);)g=b,b=a(u(g));return b};b.listOfAtomicExpressionsComparator=function(b,a){var e,g,k,p;if(b.length<a.length)return-1;if(b.length>a.length)return 1;g=e=0;for(p=
b.length;e<p;g=++e)if(k=b[g],g=w(k,a[g]),0!==g)return g;return 0};w=function(b,a){var g,k;g=e(b.type,a.type);if(0!==g)return g;if("not"===b.type&&"not"!==a.type)return g=w(b.left,a),0===g?1:g;if("not"!==b.type&&"not"===a.type)return g=w(b,a.left),0===g?-1:g;if("not"===b.type&&"not"===a.type)return w(b.left,a.left);if(null!=b.value)return b.value<a.value?-1:b.value>a.value?1:0;if(null!=b.letter)return b.letter<a.letter?-1:b.letter>a.letter?1:0;if(null!=b.name)return b.name<a.name?-1:b.name>a.name?
1:0;if(null!=b.termlist)return g=C(b.termlist[0],b.termlist[1],G),k=C(a.termlist[0],a.termlist[1],G),G(g,k);throw Error("Could not do a comparison for "+JSON.stringify(b,null,4));};b.atomicExpressionComparator=w;C=function(b,a,e){return 0<e(b,a)?a:b};G=function(b,a){var g;g=e(b.type,a.type);return 0!==g?g:b.name<a.name?-1:b.name>a.name?1:0};b.termComparator=G;e=function(b,a){var e;if("not"===b||"not"===a)return 0;e={value:5,sentence_letter:10,predicate:20,identity:30,name:50,variable:60};return e[b]<
e[a]?-1:e[b]>e[a]?1:0};b.listTerms=function(b){var a;a=[];x(b,function(b){var c;if("variable"===(c=b.type)||"name"===c||"term_metavariable"===c)return a.push(b)});return a};b.listMetaVariableNames=function(b){var a,e;a={inExpression:[],inBox:[],inSub:{left:[],right:[]}};e=function(b){var c;if(null==(null!=b?b.type:void 0)||"term_metavariable"!==b.type&&"expression_variable"!==b.type)return b;c=(null!=(null!=b?b.letter:void 0)?b.letter:void 0)||b.name;null!=e._inSub?null!=e._inSubLeft?a.inSub.left.push(c):
a.inSub.right.push(c):null!=e._inBox?a.inBox.push(c):a.inExpression.push(c);return b};x(b,e);return a};b.expressionTypes="existential_quantifier universal_quantifier and or nand nor arrow double_arrow not value predicate identity expression_variable sentence_letter".split(" ");b.termTypes=["name","variable","term_metavariable"];b.atomicSentenceTypes=["sentence_letter","expression_variable","identity","predicate"];b.expressionContainsSubstitutions=function(b){return!0===A(b,function(a){if(null!=(null!=
a?a.substitutions:void 0))return!0})?!0:!1};b.expressionHasSub=function(b,a){var e,g,k,p;if(null==(null!=b?b.substitutions:void 0))return!1;p=b.substitutions;g=0;for(k=p.length;g<k;g++)if(e=p[g],D(e.from,a.from)&&D(e.to,a.to))return!0;return!1}},{lodash:8}]},{},[4]);
